{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":15},"end":{"line":3,"column":31,"index":46}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"use-latest-callback","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":47},"end":{"line":4,"column":52,"index":99}}],"key":"2ER/r3Agt+5SFwaFR8HXg24Rpu4=","exportNames":["*"],"imports":1}},{"name":"./deepFreeze.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":100},"end":{"line":5,"column":45,"index":145}}],"key":"rNxrvQaXjK4/vUvPksJpbMJ5u+4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.useSyncState = useSyncState;\n  var _react = require(_dependencyMap[0], \"react\");\n  var React = _interopNamespace(_react);\n  var _useLatestCallback = require(_dependencyMap[1], \"use-latest-callback\");\n  var useLatestCallback = _interopDefault(_useLatestCallback);\n  var _deepFreezeJs = require(_dependencyMap[2], \"./deepFreeze.js\");\n  const createStore = getInitialState => {\n    const listeners = [];\n    let initialized = false;\n    let state;\n    const getState = () => {\n      if (initialized) {\n        return state;\n      }\n      initialized = true;\n      state = (0, _deepFreezeJs.deepFreeze)(getInitialState());\n      return state;\n    };\n    let isBatching = false;\n    let didUpdate = false;\n    const setState = newState => {\n      state = (0, _deepFreezeJs.deepFreeze)(newState);\n      didUpdate = true;\n      if (!isBatching) {\n        listeners.forEach(listener => listener());\n      }\n    };\n    const subscribe = callback => {\n      listeners.push(callback);\n      return () => {\n        const index = listeners.indexOf(callback);\n        if (index > -1) {\n          listeners.splice(index, 1);\n        }\n      };\n    };\n    const batchUpdates = callback => {\n      isBatching = true;\n      callback();\n      isBatching = false;\n      if (didUpdate) {\n        didUpdate = false;\n        listeners.forEach(listener => listener());\n      }\n    };\n    return {\n      getState,\n      setState,\n      batchUpdates,\n      subscribe\n    };\n  };\n  function useSyncState(getInitialState) {\n    const store = React.useRef(createStore(getInitialState)).current;\n    const state = React.useSyncExternalStore(store.subscribe, store.getState, store.getState);\n    React.useDebugValue(state);\n    const pendingUpdatesRef = React.useRef([]);\n    const scheduleUpdate = (0, useLatestCallback.default)(callback => {\n      pendingUpdatesRef.current.push(callback);\n    });\n    const flushUpdates = (0, useLatestCallback.default)(() => {\n      const pendingUpdates = pendingUpdatesRef.current;\n      pendingUpdatesRef.current = [];\n      if (pendingUpdates.length !== 0) {\n        store.batchUpdates(() => {\n          // Flush all the pending updates\n          for (const update of pendingUpdates) {\n            update();\n          }\n        });\n      }\n    });\n    return {\n      state,\n      getState: store.getState,\n      setState: store.setState,\n      scheduleUpdate,\n      flushUpdates\n    };\n  }\n});","lineCount":107,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13,"Object"],[4,8,1,13],[4,9,1,13,"defineProperty"],[4,23,1,13],[4,24,1,13,"exports"],[4,31,1,13],[5,4,1,13,"value"],[5,9,1,13],[6,2,1,13],[7,2,1,13],[7,11,1,13,"_interopNamespace"],[7,29,1,13,"e"],[7,30,1,13],[8,4,1,13],[8,8,1,13,"e"],[8,9,1,13],[8,13,1,13,"e"],[8,14,1,13],[8,15,1,13,"__esModule"],[8,25,1,13],[8,34,1,13,"e"],[8,35,1,13],[9,4,1,13],[9,8,1,13,"n"],[9,9,1,13],[10,4,1,13],[10,8,1,13,"e"],[10,9,1,13],[10,11,1,13,"Object"],[10,17,1,13],[10,18,1,13,"keys"],[10,22,1,13],[10,23,1,13,"e"],[10,24,1,13],[10,26,1,13,"forEach"],[10,33,1,13],[10,44,1,13,"k"],[10,45,1,13],[11,6,1,13],[11,10,1,13,"d"],[11,11,1,13],[11,14,1,13,"Object"],[11,20,1,13],[11,21,1,13,"getOwnPropertyDescriptor"],[11,45,1,13],[11,46,1,13,"e"],[11,47,1,13],[11,49,1,13,"k"],[11,50,1,13],[12,6,1,13,"Object"],[12,12,1,13],[12,13,1,13,"defineProperty"],[12,27,1,13],[12,28,1,13,"n"],[12,29,1,13],[12,31,1,13,"k"],[12,32,1,13],[12,34,1,13,"d"],[12,35,1,13],[12,36,1,13,"get"],[12,39,1,13],[12,42,1,13,"d"],[12,43,1,13],[13,8,1,13,"enumerable"],[13,18,1,13],[14,8,1,13,"get"],[14,11,1,13],[14,22,1,13,"get"],[14,23,1,13],[15,10,1,13],[15,17,1,13,"e"],[15,18,1,13],[15,19,1,13,"k"],[15,20,1,13],[16,8,1,13],[17,6,1,13],[18,4,1,13],[19,4,1,13,"n"],[19,5,1,13],[19,6,1,13,"default"],[19,13,1,13],[19,16,1,13,"e"],[19,17,1,13],[20,4,1,13],[20,11,1,13,"n"],[20,12,1,13],[21,2,1,13],[22,2,1,13],[22,11,1,13,"_interopDefault"],[22,27,1,13,"e"],[22,28,1,13],[23,4,1,13],[23,11,1,13,"e"],[23,12,1,13],[23,16,1,13,"e"],[23,17,1,13],[23,18,1,13,"__esModule"],[23,28,1,13],[23,31,1,13,"e"],[23,32,1,13],[24,6,1,13,"default"],[24,13,1,13],[24,15,1,13,"e"],[25,4,1,13],[26,2,1,13],[27,2,52,0,"exports"],[27,9,52,0],[27,10,52,0,"useSyncState"],[27,22,52,0],[27,25,52,0,"useSyncState"],[27,37,52,0],[28,2,3,0],[28,6,3,0,"_react"],[28,12,3,0],[28,15,3,0,"require"],[28,22,3,0],[28,23,3,0,"_dependencyMap"],[28,37,3,0],[29,2,3,0],[29,6,3,0,"React"],[29,11,3,0],[29,14,3,0,"_interopNamespace"],[29,31,3,0],[29,32,3,0,"_react"],[29,38,3,0],[30,2,4,0],[30,6,4,0,"_useLatestCallback"],[30,24,4,0],[30,27,4,0,"require"],[30,34,4,0],[30,35,4,0,"_dependencyMap"],[30,49,4,0],[31,2,4,0],[31,6,4,0,"useLatestCallback"],[31,23,4,0],[31,26,4,0,"_interopDefault"],[31,41,4,0],[31,42,4,0,"_useLatestCallback"],[31,60,4,0],[32,2,5,0],[32,6,5,0,"_deepFreezeJs"],[32,19,5,0],[32,22,5,0,"require"],[32,29,5,0],[32,30,5,0,"_dependencyMap"],[32,44,5,0],[33,2,6,0],[33,8,6,6,"createStore"],[33,19,6,17],[33,22,6,20,"getInitialState"],[33,37,6,35],[33,41,6,39],[34,4,7,2],[34,10,7,8,"listeners"],[34,19,7,17],[34,22,7,20],[34,24,7,22],[35,4,8,2],[35,8,8,6,"initialized"],[35,19,8,17],[35,22,8,20],[35,27,8,25],[36,4,9,2],[36,8,9,6,"state"],[36,13,9,11],[37,4,10,2],[37,10,10,8,"getState"],[37,18,10,16],[37,21,10,19,"getState"],[37,22,10,19],[37,27,10,25],[38,6,11,4],[38,10,11,8,"initialized"],[38,21,11,19],[38,23,11,21],[39,8,12,6],[39,15,12,13,"state"],[39,20,12,18],[40,6,13,4],[41,6,14,4,"initialized"],[41,17,14,15],[41,20,14,18],[41,24,14,22],[42,6,15,4,"state"],[42,11,15,9],[42,14,15,12],[42,18,15,12,"deepFreeze"],[42,31,15,22],[42,32,15,22,"deepFreeze"],[42,42,15,22],[42,44,15,23,"getInitialState"],[42,59,15,38],[42,60,15,39],[42,61,15,40],[42,62,15,41],[43,6,16,4],[43,13,16,11,"state"],[43,18,16,16],[44,4,17,2],[44,5,17,3],[45,4,18,2],[45,8,18,6,"isBatching"],[45,18,18,16],[45,21,18,19],[45,26,18,24],[46,4,19,2],[46,8,19,6,"didUpdate"],[46,17,19,15],[46,20,19,18],[46,25,19,23],[47,4,20,2],[47,10,20,8,"setState"],[47,18,20,16],[47,21,20,19,"newState"],[47,29,20,27],[47,33,20,31],[48,6,21,4,"state"],[48,11,21,9],[48,14,21,12],[48,18,21,12,"deepFreeze"],[48,31,21,22],[48,32,21,22,"deepFreeze"],[48,42,21,22],[48,44,21,23,"newState"],[48,52,21,31],[48,53,21,32],[49,6,22,4,"didUpdate"],[49,15,22,13],[49,18,22,16],[49,22,22,20],[50,6,23,4],[50,10,23,8],[50,11,23,9,"isBatching"],[50,21,23,19],[50,23,23,21],[51,8,24,6,"listeners"],[51,17,24,15],[51,18,24,16,"forEach"],[51,25,24,23],[51,26,24,24,"listener"],[51,34,24,32],[51,38,24,36,"listener"],[51,46,24,44],[51,47,24,45],[51,48,24,46],[51,49,24,47],[52,6,25,4],[53,4,26,2],[53,5,26,3],[54,4,27,2],[54,10,27,8,"subscribe"],[54,19,27,17],[54,22,27,20,"callback"],[54,30,27,28],[54,34,27,32],[55,6,28,4,"listeners"],[55,15,28,13],[55,16,28,14,"push"],[55,20,28,18],[55,21,28,19,"callback"],[55,29,28,27],[55,30,28,28],[56,6,29,4],[56,13,29,11],[56,19,29,17],[57,8,30,6],[57,14,30,12,"index"],[57,19,30,17],[57,22,30,20,"listeners"],[57,31,30,29],[57,32,30,30,"indexOf"],[57,39,30,37],[57,40,30,38,"callback"],[57,48,30,46],[57,49,30,47],[58,8,31,6],[58,12,31,10,"index"],[58,17,31,15],[58,20,31,18],[58,21,31,19],[58,22,31,20],[58,24,31,22],[59,10,32,8,"listeners"],[59,19,32,17],[59,20,32,18,"splice"],[59,26,32,24],[59,27,32,25,"index"],[59,32,32,30],[59,34,32,32],[59,35,32,33],[59,36,32,34],[60,8,33,6],[61,6,34,4],[61,7,34,5],[62,4,35,2],[62,5,35,3],[63,4,36,2],[63,10,36,8,"batchUpdates"],[63,22,36,20],[63,25,36,23,"callback"],[63,33,36,31],[63,37,36,35],[64,6,37,4,"isBatching"],[64,16,37,14],[64,19,37,17],[64,23,37,21],[65,6,38,4,"callback"],[65,14,38,12],[65,15,38,13],[65,16,38,14],[66,6,39,4,"isBatching"],[66,16,39,14],[66,19,39,17],[66,24,39,22],[67,6,40,4],[67,10,40,8,"didUpdate"],[67,19,40,17],[67,21,40,19],[68,8,41,6,"didUpdate"],[68,17,41,15],[68,20,41,18],[68,25,41,23],[69,8,42,6,"listeners"],[69,17,42,15],[69,18,42,16,"forEach"],[69,25,42,23],[69,26,42,24,"listener"],[69,34,42,32],[69,38,42,36,"listener"],[69,46,42,44],[69,47,42,45],[69,48,42,46],[69,49,42,47],[70,6,43,4],[71,4,44,2],[71,5,44,3],[72,4,45,2],[72,11,45,9],[73,6,46,4,"getState"],[73,14,46,12],[74,6,47,4,"setState"],[74,14,47,12],[75,6,48,4,"batchUpdates"],[75,18,48,16],[76,6,49,4,"subscribe"],[77,4,50,2],[77,5,50,3],[78,2,51,0],[78,3,51,1],[79,2,52,7],[79,11,52,16,"useSyncState"],[79,23,52,28,"useSyncState"],[79,24,52,29,"getInitialState"],[79,39,52,44],[79,41,52,46],[80,4,53,2],[80,10,53,8,"store"],[80,15,53,13],[80,18,53,16,"React"],[80,23,53,21],[80,24,53,22,"useRef"],[80,30,53,28],[80,31,53,29,"createStore"],[80,42,53,40],[80,43,53,41,"getInitialState"],[80,58,53,56],[80,59,53,57],[80,60,53,58],[80,61,53,59,"current"],[80,68,53,66],[81,4,54,2],[81,10,54,8,"state"],[81,15,54,13],[81,18,54,16,"React"],[81,23,54,21],[81,24,54,22,"useSyncExternalStore"],[81,44,54,42],[81,45,54,43,"store"],[81,50,54,48],[81,51,54,49,"subscribe"],[81,60,54,58],[81,62,54,60,"store"],[81,67,54,65],[81,68,54,66,"getState"],[81,76,54,74],[81,78,54,76,"store"],[81,83,54,81],[81,84,54,82,"getState"],[81,92,54,90],[81,93,54,91],[82,4,55,2,"React"],[82,9,55,7],[82,10,55,8,"useDebugValue"],[82,23,55,21],[82,24,55,22,"state"],[82,29,55,27],[82,30,55,28],[83,4,56,2],[83,10,56,8,"pendingUpdatesRef"],[83,27,56,25],[83,30,56,28,"React"],[83,35,56,33],[83,36,56,34,"useRef"],[83,42,56,40],[83,43,56,41],[83,45,56,43],[83,46,56,44],[84,4,57,2],[84,10,57,8,"scheduleUpdate"],[84,24,57,22],[84,27,57,25],[84,31,57,25,"useLatestCallback"],[84,48,57,42],[84,49,57,42,"default"],[84,56,57,42],[84,58,57,43,"callback"],[84,66,57,51],[84,70,57,55],[85,6,58,4,"pendingUpdatesRef"],[85,23,58,21],[85,24,58,22,"current"],[85,31,58,29],[85,32,58,30,"push"],[85,36,58,34],[85,37,58,35,"callback"],[85,45,58,43],[85,46,58,44],[86,4,59,2],[86,5,59,3],[86,6,59,4],[87,4,60,2],[87,10,60,8,"flushUpdates"],[87,22,60,20],[87,25,60,23],[87,29,60,23,"useLatestCallback"],[87,46,60,40],[87,47,60,40,"default"],[87,54,60,40],[87,56,60,41],[87,62,60,47],[88,6,61,4],[88,12,61,10,"pendingUpdates"],[88,26,61,24],[88,29,61,27,"pendingUpdatesRef"],[88,46,61,44],[88,47,61,45,"current"],[88,54,61,52],[89,6,62,4,"pendingUpdatesRef"],[89,23,62,21],[89,24,62,22,"current"],[89,31,62,29],[89,34,62,32],[89,36,62,34],[90,6,63,4],[90,10,63,8,"pendingUpdates"],[90,24,63,22],[90,25,63,23,"length"],[90,31,63,29],[90,36,63,34],[90,37,63,35],[90,39,63,37],[91,8,64,6,"store"],[91,13,64,11],[91,14,64,12,"batchUpdates"],[91,26,64,24],[91,27,64,25],[91,33,64,31],[92,10,65,8],[93,10,66,8],[93,15,66,13],[93,21,66,19,"update"],[93,27,66,25],[93,31,66,29,"pendingUpdates"],[93,45,66,43],[93,47,66,45],[94,12,67,10,"update"],[94,18,67,16],[94,19,67,17],[94,20,67,18],[95,10,68,8],[96,8,69,6],[96,9,69,7],[96,10,69,8],[97,6,70,4],[98,4,71,2],[98,5,71,3],[98,6,71,4],[99,4,72,2],[99,11,72,9],[100,6,73,4,"state"],[100,11,73,9],[101,6,74,4,"getState"],[101,14,74,12],[101,16,74,14,"store"],[101,21,74,19],[101,22,74,20,"getState"],[101,30,74,28],[102,6,75,4,"setState"],[102,14,75,12],[102,16,75,14,"store"],[102,21,75,19],[102,22,75,20,"setState"],[102,30,75,28],[103,6,76,4,"scheduleUpdate"],[103,20,76,18],[104,6,77,4,"flushUpdates"],[105,4,78,2],[105,5,78,3],[106,2,79,0],[107,0,79,1],[107,3]],"functionMap":{"names":["<global>","createStore","getState","setState","listeners.forEach$argument_0","subscribe","<anonymous>","batchUpdates","useSyncState","useLatestCallback$argument_0","store.batchUpdates$argument_0"],"mappings":"AAA;oBCK;mBCI;GDO;mBEG;wBCI,sBD;GFE;oBIC;WCE;KDK;GJC;uBMC;wBHM,sBG;GNE;CDO;OQC;2CCK;GDE;yCCC;yBCI;ODK;GDE;CRQ"},"hasCjsExports":false},"type":"js/module"}]}