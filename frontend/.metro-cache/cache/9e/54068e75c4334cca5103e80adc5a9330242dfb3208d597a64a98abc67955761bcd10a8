{"dependencies":[{"name":"nanoid/non-secure","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":15},"end":{"line":3,"column":43,"index":58}}],"key":"SN8WVal79eAEDQEpzmVqVAy5JJs=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":59},"end":{"line":4,"column":31,"index":90}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"use-latest-callback","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":91},"end":{"line":5,"column":52,"index":143}}],"key":"2ER/r3Agt+5SFwaFR8HXg24Rpu4=","exportNames":["*"],"imports":1}},{"name":"./NavigationHelpersContext.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":144},"end":{"line":6,"column":73,"index":217}}],"key":"UPnefzBCahUrTRoOWw51hXJ7z+A=","exportNames":["*"],"imports":1}},{"name":"./NavigationRouteContext.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":218},"end":{"line":7,"column":69,"index":287}}],"key":"AWXnpGNA5UkH1qQUM7hLv2L9KzI=","exportNames":["*"],"imports":1}},{"name":"./PreventRemoveContext.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":8,"column":0,"index":288},"end":{"line":8,"column":65,"index":353}}],"key":"gocprUc09OHt9JxWdj0Uy4jHmps=","exportNames":["*"],"imports":1}},{"name":"react/jsx-runtime","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":9,"column":0,"index":354},"end":{"line":9,"column":48,"index":402}}],"key":"rKAWVuQOSSDHxC6IWcmkeWszaWg=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.PreventRemoveProvider = PreventRemoveProvider;\n  var _nanoidNonSecure = require(_dependencyMap[0], \"nanoid/non-secure\");\n  var _react = require(_dependencyMap[1], \"react\");\n  var React = _interopNamespace(_react);\n  var _useLatestCallback = require(_dependencyMap[2], \"use-latest-callback\");\n  var useLatestCallback = _interopDefault(_useLatestCallback);\n  var _NavigationHelpersContextJs = require(_dependencyMap[3], \"./NavigationHelpersContext.js\");\n  var _NavigationRouteContextJs = require(_dependencyMap[4], \"./NavigationRouteContext.js\");\n  var _PreventRemoveContextJs = require(_dependencyMap[5], \"./PreventRemoveContext.js\");\n  var _reactJsxRuntime = require(_dependencyMap[6], \"react/jsx-runtime\");\n  /**\n   * Util function to transform map of prevented routes to a simpler object.\n   */\n  const transformPreventedRoutes = preventedRoutesMap => {\n    const preventedRoutesToTransform = [...preventedRoutesMap.values()];\n    const preventedRoutes = preventedRoutesToTransform.reduce((acc, {\n      routeKey,\n      preventRemove\n    }) => {\n      acc[routeKey] = {\n        preventRemove: acc[routeKey]?.preventRemove || preventRemove\n      };\n      return acc;\n    }, {});\n    return preventedRoutes;\n  };\n\n  /**\n   * Component used for managing which routes have to be prevented from removal in native-stack.\n   */\n  function PreventRemoveProvider({\n    children\n  }) {\n    const [parentId] = React.useState(() => (0, _nanoidNonSecure.nanoid)());\n    const [preventedRoutesMap, setPreventedRoutesMap] = React.useState(() => new Map());\n    const navigation = React.useContext(_NavigationHelpersContextJs.NavigationHelpersContext);\n    const route = React.useContext(_NavigationRouteContextJs.NavigationRouteContext);\n    const preventRemoveContextValue = React.useContext(_PreventRemoveContextJs.PreventRemoveContext);\n    // take `setPreventRemove` from parent context - if exist it means we're in a nested context\n    const setParentPrevented = preventRemoveContextValue?.setPreventRemove;\n    const setPreventRemove = (0, useLatestCallback.default)((id, routeKey, preventRemove) => {\n      if (preventRemove && (navigation == null || navigation?.getState().routes.every(route => route.key !== routeKey))) {\n        throw new Error(`Couldn't find a route with the key ${routeKey}. Is your component inside NavigationContent?`);\n      }\n      setPreventedRoutesMap(prevPrevented => {\n        // values haven't changed - do nothing\n        if (routeKey === prevPrevented.get(id)?.routeKey && preventRemove === prevPrevented.get(id)?.preventRemove) {\n          return prevPrevented;\n        }\n        const nextPrevented = new Map(prevPrevented);\n        if (preventRemove) {\n          nextPrevented.set(id, {\n            routeKey,\n            preventRemove\n          });\n        } else {\n          nextPrevented.delete(id);\n        }\n        return nextPrevented;\n      });\n    });\n    const isPrevented = [...preventedRoutesMap.values()].some(({\n      preventRemove\n    }) => preventRemove);\n    React.useEffect(() => {\n      if (route?.key !== undefined && setParentPrevented !== undefined) {\n        // when route is defined (and setParentPrevented) it means we're in a nested stack\n        // route.key then will be the route key of parent\n        setParentPrevented(parentId, route.key, isPrevented);\n        return () => {\n          setParentPrevented(parentId, route.key, false);\n        };\n      }\n      return;\n    }, [parentId, isPrevented, route?.key, setParentPrevented]);\n    const value = React.useMemo(() => ({\n      setPreventRemove,\n      preventedRoutes: transformPreventedRoutes(preventedRoutesMap)\n    }), [setPreventRemove, preventedRoutesMap]);\n    return /*#__PURE__*/(0, _reactJsxRuntime.jsx)(_PreventRemoveContextJs.PreventRemoveContext.Provider, {\n      value: value,\n      children: children\n    });\n  }\n});","lineCount":111,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13,"Object"],[4,8,1,13],[4,9,1,13,"defineProperty"],[4,23,1,13],[4,24,1,13,"exports"],[4,31,1,13],[5,4,1,13,"value"],[5,9,1,13],[6,2,1,13],[7,2,1,13],[7,11,1,13,"_interopNamespace"],[7,29,1,13,"e"],[7,30,1,13],[8,4,1,13],[8,8,1,13,"e"],[8,9,1,13],[8,13,1,13,"e"],[8,14,1,13],[8,15,1,13,"__esModule"],[8,25,1,13],[8,34,1,13,"e"],[8,35,1,13],[9,4,1,13],[9,8,1,13,"n"],[9,9,1,13],[10,4,1,13],[10,8,1,13,"e"],[10,9,1,13],[10,11,1,13,"Object"],[10,17,1,13],[10,18,1,13,"keys"],[10,22,1,13],[10,23,1,13,"e"],[10,24,1,13],[10,26,1,13,"forEach"],[10,33,1,13],[10,44,1,13,"k"],[10,45,1,13],[11,6,1,13],[11,10,1,13,"d"],[11,11,1,13],[11,14,1,13,"Object"],[11,20,1,13],[11,21,1,13,"getOwnPropertyDescriptor"],[11,45,1,13],[11,46,1,13,"e"],[11,47,1,13],[11,49,1,13,"k"],[11,50,1,13],[12,6,1,13,"Object"],[12,12,1,13],[12,13,1,13,"defineProperty"],[12,27,1,13],[12,28,1,13,"n"],[12,29,1,13],[12,31,1,13,"k"],[12,32,1,13],[12,34,1,13,"d"],[12,35,1,13],[12,36,1,13,"get"],[12,39,1,13],[12,42,1,13,"d"],[12,43,1,13],[13,8,1,13,"enumerable"],[13,18,1,13],[14,8,1,13,"get"],[14,11,1,13],[14,22,1,13,"get"],[14,23,1,13],[15,10,1,13],[15,17,1,13,"e"],[15,18,1,13],[15,19,1,13,"k"],[15,20,1,13],[16,8,1,13],[17,6,1,13],[18,4,1,13],[19,4,1,13,"n"],[19,5,1,13],[19,6,1,13,"default"],[19,13,1,13],[19,16,1,13,"e"],[19,17,1,13],[20,4,1,13],[20,11,1,13,"n"],[20,12,1,13],[21,2,1,13],[22,2,1,13],[22,11,1,13,"_interopDefault"],[22,27,1,13,"e"],[22,28,1,13],[23,4,1,13],[23,11,1,13,"e"],[23,12,1,13],[23,16,1,13,"e"],[23,17,1,13],[23,18,1,13,"__esModule"],[23,28,1,13],[23,31,1,13,"e"],[23,32,1,13],[24,6,1,13,"default"],[24,13,1,13],[24,15,1,13,"e"],[25,4,1,13],[26,2,1,13],[27,2,30,0,"exports"],[27,9,30,0],[27,10,30,0,"PreventRemoveProvider"],[27,31,30,0],[27,34,30,0,"PreventRemoveProvider"],[27,55,30,0],[28,2,3,0],[28,6,3,0,"_nanoidNonSecure"],[28,22,3,0],[28,25,3,0,"require"],[28,32,3,0],[28,33,3,0,"_dependencyMap"],[28,47,3,0],[29,2,4,0],[29,6,4,0,"_react"],[29,12,4,0],[29,15,4,0,"require"],[29,22,4,0],[29,23,4,0,"_dependencyMap"],[29,37,4,0],[30,2,4,0],[30,6,4,0,"React"],[30,11,4,0],[30,14,4,0,"_interopNamespace"],[30,31,4,0],[30,32,4,0,"_react"],[30,38,4,0],[31,2,5,0],[31,6,5,0,"_useLatestCallback"],[31,24,5,0],[31,27,5,0,"require"],[31,34,5,0],[31,35,5,0,"_dependencyMap"],[31,49,5,0],[32,2,5,0],[32,6,5,0,"useLatestCallback"],[32,23,5,0],[32,26,5,0,"_interopDefault"],[32,41,5,0],[32,42,5,0,"_useLatestCallback"],[32,60,5,0],[33,2,6,0],[33,6,6,0,"_NavigationHelpersContextJs"],[33,33,6,0],[33,36,6,0,"require"],[33,43,6,0],[33,44,6,0,"_dependencyMap"],[33,58,6,0],[34,2,7,0],[34,6,7,0,"_NavigationRouteContextJs"],[34,31,7,0],[34,34,7,0,"require"],[34,41,7,0],[34,42,7,0,"_dependencyMap"],[34,56,7,0],[35,2,8,0],[35,6,8,0,"_PreventRemoveContextJs"],[35,29,8,0],[35,32,8,0,"require"],[35,39,8,0],[35,40,8,0,"_dependencyMap"],[35,54,8,0],[36,2,9,0],[36,6,9,0,"_reactJsxRuntime"],[36,22,9,0],[36,25,9,0,"require"],[36,32,9,0],[36,33,9,0,"_dependencyMap"],[36,47,9,0],[37,2,10,0],[38,0,11,0],[39,0,12,0],[40,2,13,0],[40,8,13,6,"transformPreventedRoutes"],[40,32,13,30],[40,35,13,33,"preventedRoutesMap"],[40,53,13,51],[40,57,13,55],[41,4,14,2],[41,10,14,8,"preventedRoutesToTransform"],[41,36,14,34],[41,39,14,37],[41,40,14,38],[41,43,14,41,"preventedRoutesMap"],[41,61,14,59],[41,62,14,60,"values"],[41,68,14,66],[41,69,14,67],[41,70,14,68],[41,71,14,69],[42,4,15,2],[42,10,15,8,"preventedRoutes"],[42,25,15,23],[42,28,15,26,"preventedRoutesToTransform"],[42,54,15,52],[42,55,15,53,"reduce"],[42,61,15,59],[42,62,15,60],[42,63,15,61,"acc"],[42,66,15,64],[42,68,15,66],[43,6,16,4,"routeKey"],[43,14,16,12],[44,6,17,4,"preventRemove"],[45,4,18,2],[45,5,18,3],[45,10,18,8],[46,6,19,4,"acc"],[46,9,19,7],[46,10,19,8,"routeKey"],[46,18,19,16],[46,19,19,17],[46,22,19,20],[47,8,20,6,"preventRemove"],[47,21,20,19],[47,23,20,21,"acc"],[47,26,20,24],[47,27,20,25,"routeKey"],[47,35,20,33],[47,36,20,34],[47,38,20,36,"preventRemove"],[47,51,20,49],[47,55,20,53,"preventRemove"],[48,6,21,4],[48,7,21,5],[49,6,22,4],[49,13,22,11,"acc"],[49,16,22,14],[50,4,23,2],[50,5,23,3],[50,7,23,5],[50,8,23,6],[50,9,23,7],[50,10,23,8],[51,4,24,2],[51,11,24,9,"preventedRoutes"],[51,26,24,24],[52,2,25,0],[52,3,25,1],[54,2,27,0],[55,0,28,0],[56,0,29,0],[57,2,30,7],[57,11,30,16,"PreventRemoveProvider"],[57,32,30,37,"PreventRemoveProvider"],[57,33,30,38],[58,4,31,2,"children"],[59,2,32,0],[59,3,32,1],[59,5,32,3],[60,4,33,2],[60,10,33,8],[60,11,33,9,"parentId"],[60,19,33,17],[60,20,33,18],[60,23,33,21,"React"],[60,28,33,26],[60,29,33,27,"useState"],[60,37,33,35],[60,38,33,36],[60,44,33,42],[60,48,33,42,"nanoid"],[60,64,33,48],[60,65,33,48,"nanoid"],[60,71,33,48],[60,73,33,49],[60,74,33,50],[60,75,33,51],[61,4,34,2],[61,10,34,8],[61,11,34,9,"preventedRoutesMap"],[61,29,34,27],[61,31,34,29,"setPreventedRoutesMap"],[61,52,34,50],[61,53,34,51],[61,56,34,54,"React"],[61,61,34,59],[61,62,34,60,"useState"],[61,70,34,68],[61,71,34,69],[61,77,34,75],[61,81,34,79,"Map"],[61,84,34,82],[61,85,34,83],[61,86,34,84],[61,87,34,85],[62,4,35,2],[62,10,35,8,"navigation"],[62,20,35,18],[62,23,35,21,"React"],[62,28,35,26],[62,29,35,27,"useContext"],[62,39,35,37],[62,40,35,38,"NavigationHelpersContext"],[62,67,35,62],[62,68,35,62,"NavigationHelpersContext"],[62,92,35,62],[62,93,35,63],[63,4,36,2],[63,10,36,8,"route"],[63,15,36,13],[63,18,36,16,"React"],[63,23,36,21],[63,24,36,22,"useContext"],[63,34,36,32],[63,35,36,33,"NavigationRouteContext"],[63,60,36,55],[63,61,36,55,"NavigationRouteContext"],[63,83,36,55],[63,84,36,56],[64,4,37,2],[64,10,37,8,"preventRemoveContextValue"],[64,35,37,33],[64,38,37,36,"React"],[64,43,37,41],[64,44,37,42,"useContext"],[64,54,37,52],[64,55,37,53,"PreventRemoveContext"],[64,78,37,73],[64,79,37,73,"PreventRemoveContext"],[64,99,37,73],[64,100,37,74],[65,4,38,2],[66,4,39,2],[66,10,39,8,"setParentPrevented"],[66,28,39,26],[66,31,39,29,"preventRemoveContextValue"],[66,56,39,54],[66,58,39,56,"setPreventRemove"],[66,74,39,72],[67,4,40,2],[67,10,40,8,"setPreventRemove"],[67,26,40,24],[67,29,40,27],[67,33,40,27,"useLatestCallback"],[67,50,40,44],[67,51,40,44,"default"],[67,58,40,44],[67,60,40,45],[67,61,40,46,"id"],[67,63,40,48],[67,65,40,50,"routeKey"],[67,73,40,58],[67,75,40,60,"preventRemove"],[67,88,40,73],[67,93,40,78],[68,6,41,4],[68,10,41,8,"preventRemove"],[68,23,41,21],[68,28,41,26,"navigation"],[68,38,41,36],[68,42,41,40],[68,46,41,44],[68,50,41,48,"navigation"],[68,60,41,58],[68,62,41,60,"getState"],[68,70,41,68],[68,71,41,69],[68,72,41,70],[68,73,41,71,"routes"],[68,79,41,77],[68,80,41,78,"every"],[68,85,41,83],[68,86,41,84,"route"],[68,91,41,89],[68,95,41,93,"route"],[68,100,41,98],[68,101,41,99,"key"],[68,104,41,102],[68,109,41,107,"routeKey"],[68,117,41,115],[68,118,41,116],[68,119,41,117],[68,121,41,119],[69,8,42,6],[69,14,42,12],[69,18,42,16,"Error"],[69,23,42,21],[69,24,42,22],[69,62,42,60,"routeKey"],[69,70,42,68],[69,117,42,115],[69,118,42,116],[70,6,43,4],[71,6,44,4,"setPreventedRoutesMap"],[71,27,44,25],[71,28,44,26,"prevPrevented"],[71,41,44,39],[71,45,44,43],[72,8,45,6],[73,8,46,6],[73,12,46,10,"routeKey"],[73,20,46,18],[73,25,46,23,"prevPrevented"],[73,38,46,36],[73,39,46,37,"get"],[73,42,46,40],[73,43,46,41,"id"],[73,45,46,43],[73,46,46,44],[73,48,46,46,"routeKey"],[73,56,46,54],[73,60,46,58,"preventRemove"],[73,73,46,71],[73,78,46,76,"prevPrevented"],[73,91,46,89],[73,92,46,90,"get"],[73,95,46,93],[73,96,46,94,"id"],[73,98,46,96],[73,99,46,97],[73,101,46,99,"preventRemove"],[73,114,46,112],[73,116,46,114],[74,10,47,8],[74,17,47,15,"prevPrevented"],[74,30,47,28],[75,8,48,6],[76,8,49,6],[76,14,49,12,"nextPrevented"],[76,27,49,25],[76,30,49,28],[76,34,49,32,"Map"],[76,37,49,35],[76,38,49,36,"prevPrevented"],[76,51,49,49],[76,52,49,50],[77,8,50,6],[77,12,50,10,"preventRemove"],[77,25,50,23],[77,27,50,25],[78,10,51,8,"nextPrevented"],[78,23,51,21],[78,24,51,22,"set"],[78,27,51,25],[78,28,51,26,"id"],[78,30,51,28],[78,32,51,30],[79,12,52,10,"routeKey"],[79,20,52,18],[80,12,53,10,"preventRemove"],[81,10,54,8],[81,11,54,9],[81,12,54,10],[82,8,55,6],[82,9,55,7],[82,15,55,13],[83,10,56,8,"nextPrevented"],[83,23,56,21],[83,24,56,22,"delete"],[83,30,56,28],[83,31,56,29,"id"],[83,33,56,31],[83,34,56,32],[84,8,57,6],[85,8,58,6],[85,15,58,13,"nextPrevented"],[85,28,58,26],[86,6,59,4],[86,7,59,5],[86,8,59,6],[87,4,60,2],[87,5,60,3],[87,6,60,4],[88,4,61,2],[88,10,61,8,"isPrevented"],[88,21,61,19],[88,24,61,22],[88,25,61,23],[88,28,61,26,"preventedRoutesMap"],[88,46,61,44],[88,47,61,45,"values"],[88,53,61,51],[88,54,61,52],[88,55,61,53],[88,56,61,54],[88,57,61,55,"some"],[88,61,61,59],[88,62,61,60],[88,63,61,61],[89,6,62,4,"preventRemove"],[90,4,63,2],[90,5,63,3],[90,10,63,8,"preventRemove"],[90,23,63,21],[90,24,63,22],[91,4,64,2,"React"],[91,9,64,7],[91,10,64,8,"useEffect"],[91,19,64,17],[91,20,64,18],[91,26,64,24],[92,6,65,4],[92,10,65,8,"route"],[92,15,65,13],[92,17,65,15,"key"],[92,20,65,18],[92,25,65,23,"undefined"],[92,34,65,32],[92,38,65,36,"setParentPrevented"],[92,56,65,54],[92,61,65,59,"undefined"],[92,70,65,68],[92,72,65,70],[93,8,66,6],[94,8,67,6],[95,8,68,6,"setParentPrevented"],[95,26,68,24],[95,27,68,25,"parentId"],[95,35,68,33],[95,37,68,35,"route"],[95,42,68,40],[95,43,68,41,"key"],[95,46,68,44],[95,48,68,46,"isPrevented"],[95,59,68,57],[95,60,68,58],[96,8,69,6],[96,15,69,13],[96,21,69,19],[97,10,70,8,"setParentPrevented"],[97,28,70,26],[97,29,70,27,"parentId"],[97,37,70,35],[97,39,70,37,"route"],[97,44,70,42],[97,45,70,43,"key"],[97,48,70,46],[97,50,70,48],[97,55,70,53],[97,56,70,54],[98,8,71,6],[98,9,71,7],[99,6,72,4],[100,6,73,4],[101,4,74,2],[101,5,74,3],[101,7,74,5],[101,8,74,6,"parentId"],[101,16,74,14],[101,18,74,16,"isPrevented"],[101,29,74,27],[101,31,74,29,"route"],[101,36,74,34],[101,38,74,36,"key"],[101,41,74,39],[101,43,74,41,"setParentPrevented"],[101,61,74,59],[101,62,74,60],[101,63,74,61],[102,4,75,2],[102,10,75,8,"value"],[102,15,75,13],[102,18,75,16,"React"],[102,23,75,21],[102,24,75,22,"useMemo"],[102,31,75,29],[102,32,75,30],[102,39,75,37],[103,6,76,4,"setPreventRemove"],[103,22,76,20],[104,6,77,4,"preventedRoutes"],[104,21,77,19],[104,23,77,21,"transformPreventedRoutes"],[104,47,77,45],[104,48,77,46,"preventedRoutesMap"],[104,66,77,64],[105,4,78,2],[105,5,78,3],[105,6,78,4],[105,8,78,6],[105,9,78,7,"setPreventRemove"],[105,25,78,23],[105,27,78,25,"preventedRoutesMap"],[105,45,78,43],[105,46,78,44],[105,47,78,45],[106,4,79,2],[106,11,79,9],[106,24,79,22],[106,28,79,22,"_jsx"],[106,44,79,26],[106,45,79,26,"jsx"],[106,48,79,26],[106,50,79,27,"PreventRemoveContext"],[106,73,79,47],[106,74,79,47,"PreventRemoveContext"],[106,94,79,47],[106,95,79,48,"Provider"],[106,103,79,56],[106,105,79,58],[107,6,80,4,"value"],[107,11,80,9],[107,13,80,11,"value"],[107,18,80,16],[108,6,81,4,"children"],[108,14,81,12],[108,16,81,14,"children"],[109,4,82,2],[109,5,82,3],[109,6,82,4],[110,2,83,0],[111,0,83,1],[111,3]],"functionMap":{"names":["<global>","transformPreventedRoutes","preventedRoutesToTransform.reduce$argument_0","PreventRemoveProvider","React.useState$argument_0","useLatestCallback$argument_0","navigation.getState.routes.every$argument_0","setPreventedRoutesMap$argument_0","some$argument_0","React.useEffect$argument_0","<anonymous>","React.useMemo$argument_0"],"mappings":"AAA;iCCY;4DCE;GDQ;CDE;OGK;oCCG,cD;qECC,eD;6CEM;oFCC,+BD;0BEG;KFe;GFC;4DKC;qBLE;kBMC;aCK;ODE;GNG;8BQC;IRG;CHK"},"hasCjsExports":false},"type":"js/module"}]}