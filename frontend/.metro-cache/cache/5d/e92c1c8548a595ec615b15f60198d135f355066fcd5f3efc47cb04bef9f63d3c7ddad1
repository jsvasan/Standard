{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"]}},{"name":"../addEventListener","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":10,"column":0,"index":199},"end":{"line":10,"column":55,"index":254}}],"key":"4xvCwHsxCKw+bkXrhCHsTztm4zw=","exportNames":["*"]}},{"name":"../useLayoutEffect","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":11,"column":0,"index":255},"end":{"line":11,"column":49,"index":304}}],"key":"ZNO83OGsE7bbgM7VHgfD880OI4U=","exportNames":["*"]}},{"name":"../useStable","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":12,"column":0,"index":305},"end":{"line":12,"column":37,"index":342}}],"key":"XW9XStik11xeI23ft/PR9tQzPOs=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = useEvent;\n  var _addEventListener = require(_dependencyMap[1], \"../addEventListener\");\n  var _useLayoutEffect = _interopRequireDefault(require(_dependencyMap[2], \"../useLayoutEffect\"));\n  var _useStable = _interopRequireDefault(require(_dependencyMap[3], \"../useStable\"));\n  /**\n   * Copyright (c) Meta Platforms, Inc. and affiliates.\n   *\n   * This source code is licensed under the MIT license found in the\n   * LICENSE file in the root directory of this source tree.\n   *\n   * \n   */\n\n  /**\n   * This can be used with any event type include custom events.\n   *\n   * const click = useEvent('click', options);\n   * useEffect(() => {\n   *   click.setListener(target, onClick);\n   *   return () => click.clear();\n   * }).\n   */\n  function useEvent(eventType, options) {\n    var targetListeners = (0, _useStable.default)(() => new Map());\n    var addListener = (0, _useStable.default)(() => {\n      return (target, callback) => {\n        var removeTargetListener = targetListeners.get(target);\n        if (removeTargetListener != null) {\n          removeTargetListener();\n        }\n        if (callback == null) {\n          targetListeners.delete(target);\n          callback = () => {};\n        }\n        var removeEventListener = (0, _addEventListener.addEventListener)(target, eventType, callback, options);\n        targetListeners.set(target, removeEventListener);\n        return removeEventListener;\n      };\n    });\n    (0, _useLayoutEffect.default)(() => {\n      return () => {\n        targetListeners.forEach(removeListener => {\n          removeListener();\n        });\n        targetListeners.clear();\n      };\n    }, [targetListeners]);\n    return addListener;\n  }\n});","lineCount":55,"map":[[7,2,10,0],[7,6,10,0,"_addEventListener"],[7,23,10,0],[7,26,10,0,"require"],[7,33,10,0],[7,34,10,0,"_dependencyMap"],[7,48,10,0],[8,2,11,0],[8,6,11,0,"_useLayoutEffect"],[8,22,11,0],[8,25,11,0,"_interopRequireDefault"],[8,47,11,0],[8,48,11,0,"require"],[8,55,11,0],[8,56,11,0,"_dependencyMap"],[8,70,11,0],[9,2,12,0],[9,6,12,0,"_useStable"],[9,16,12,0],[9,19,12,0,"_interopRequireDefault"],[9,41,12,0],[9,42,12,0,"require"],[9,49,12,0],[9,50,12,0,"_dependencyMap"],[9,64,12,0],[10,2,1,0],[11,0,2,0],[12,0,3,0],[13,0,4,0],[14,0,5,0],[15,0,6,0],[16,0,7,0],[17,0,8,0],[19,2,13,0],[20,0,14,0],[21,0,15,0],[22,0,16,0],[23,0,17,0],[24,0,18,0],[25,0,19,0],[26,0,20,0],[27,0,21,0],[28,2,22,15],[28,11,22,24,"useEvent"],[28,19,22,32,"useEvent"],[28,20,22,33,"eventType"],[28,29,22,42],[28,31,22,44,"options"],[28,38,22,51],[28,40,22,53],[29,4,23,2],[29,8,23,6,"targetListeners"],[29,23,23,21],[29,26,23,24],[29,30,23,24,"useStable"],[29,48,23,33],[29,50,23,34],[29,56,23,40],[29,60,23,44,"Map"],[29,63,23,47],[29,64,23,48],[29,65,23,49],[29,66,23,50],[30,4,24,2],[30,8,24,6,"addListener"],[30,19,24,17],[30,22,24,20],[30,26,24,20,"useStable"],[30,44,24,29],[30,46,24,30],[30,52,24,36],[31,6,25,4],[31,13,25,11],[31,14,25,12,"target"],[31,20,25,18],[31,22,25,20,"callback"],[31,30,25,28],[31,35,25,33],[32,8,26,6],[32,12,26,10,"removeTargetListener"],[32,32,26,30],[32,35,26,33,"targetListeners"],[32,50,26,48],[32,51,26,49,"get"],[32,54,26,52],[32,55,26,53,"target"],[32,61,26,59],[32,62,26,60],[33,8,27,6],[33,12,27,10,"removeTargetListener"],[33,32,27,30],[33,36,27,34],[33,40,27,38],[33,42,27,40],[34,10,28,8,"removeTargetListener"],[34,30,28,28],[34,31,28,29],[34,32,28,30],[35,8,29,6],[36,8,30,6],[36,12,30,10,"callback"],[36,20,30,18],[36,24,30,22],[36,28,30,26],[36,30,30,28],[37,10,31,8,"targetListeners"],[37,25,31,23],[37,26,31,24,"delete"],[37,32,31,30],[37,33,31,31,"target"],[37,39,31,37],[37,40,31,38],[38,10,32,8,"callback"],[38,18,32,16],[38,21,32,19,"callback"],[38,22,32,19],[38,27,32,25],[38,28,32,26],[38,29,32,27],[39,8,33,6],[40,8,34,6],[40,12,34,10,"removeEventListener"],[40,31,34,29],[40,34,34,32],[40,38,34,32,"addEventListener"],[40,72,34,48],[40,74,34,49,"target"],[40,80,34,55],[40,82,34,57,"eventType"],[40,91,34,66],[40,93,34,68,"callback"],[40,101,34,76],[40,103,34,78,"options"],[40,110,34,85],[40,111,34,86],[41,8,35,6,"targetListeners"],[41,23,35,21],[41,24,35,22,"set"],[41,27,35,25],[41,28,35,26,"target"],[41,34,35,32],[41,36,35,34,"removeEventListener"],[41,55,35,53],[41,56,35,54],[42,8,36,6],[42,15,36,13,"removeEventListener"],[42,34,36,32],[43,6,37,4],[43,7,37,5],[44,4,38,2],[44,5,38,3],[44,6,38,4],[45,4,39,2],[45,8,39,2,"useLayoutEffect"],[45,32,39,17],[45,34,39,18],[45,40,39,24],[46,6,40,4],[46,13,40,11],[46,19,40,17],[47,8,41,6,"targetListeners"],[47,23,41,21],[47,24,41,22,"forEach"],[47,31,41,29],[47,32,41,30,"removeListener"],[47,46,41,44],[47,50,41,48],[48,10,42,8,"removeListener"],[48,24,42,22],[48,25,42,23],[48,26,42,24],[49,8,43,6],[49,9,43,7],[49,10,43,8],[50,8,44,6,"targetListeners"],[50,23,44,21],[50,24,44,22,"clear"],[50,29,44,27],[50,30,44,28],[50,31,44,29],[51,6,45,4],[51,7,45,5],[52,4,46,2],[52,5,46,3],[52,7,46,5],[52,8,46,6,"targetListeners"],[52,23,46,21],[52,24,46,22],[52,25,46,23],[53,4,47,2],[53,11,47,9,"addListener"],[53,22,47,20],[54,2,48,0],[55,0,48,1],[55,3]],"functionMap":{"names":["<global>","useEvent","useStable$argument_0","<anonymous>","callback","useLayoutEffect$argument_0","targetListeners.forEach$argument_0"],"mappings":"AAA;eCqB;kCCC,eD;8BCC;WCC;mBCO,QD;KDK;GDC;kBIC;WFC;8BGC;OHE;KEE;GJC"}},"type":"js/module"}]}