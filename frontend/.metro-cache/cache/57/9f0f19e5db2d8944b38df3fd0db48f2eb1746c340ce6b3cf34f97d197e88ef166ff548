{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"]}},{"name":"@babel/runtime/helpers/objectSpread2","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":65,"index":65}}],"key":"SfRhzMj3Ex6qA89WTFEUm9Lj49A=","exportNames":["*"]}},{"name":"fbjs/lib/invariant","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":12,"column":0,"index":301},"end":{"line":12,"column":43,"index":344}}],"key":"bGUa+dDG2WEhPiIlobT3urS95UE=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,_e,d){var e=r(d[0]);Object.defineProperty(_e,\"__esModule\",{value:!0}),_e.default=void 0;var t=e(r(d[1])),s=e(r(d[2]));_e.default=class{constructor(e){var t=e.onMoreTasks;this._onMoreTasks=t,this._queueStack=[{tasks:[],popable:!0}]}enqueue(e){this._getCurrentQueue().push(e)}enqueueTasks(e){e.forEach(e=>this.enqueue(e))}cancelTasks(e){this._queueStack=this._queueStack.map(s=>(0,t.default)((0,t.default)({},s),{},{tasks:s.tasks.filter(t=>-1===e.indexOf(t))})).filter((e,t)=>e.tasks.length>0||0===t)}hasTasksToProcess(){return this._getCurrentQueue().length>0}processNext(){var e=this._getCurrentQueue();if(e.length){var t=e.shift();try{'object'==typeof t&&t.gen?this._genPromise(t):'object'==typeof t&&t.run?t.run():((0,s.default)('function'==typeof t,'Expected Function, SimpleTask, or PromiseTask, but got:\\n'+JSON.stringify(t,null,2)),t())}catch(e){throw e.message='TaskQueue: Error with task '+(t.name||'')+': '+e.message,e}}}_getCurrentQueue(){var e=this._queueStack.length-1,t=this._queueStack[e];return t.popable&&0===t.tasks.length&&e>0?(this._queueStack.pop(),this._getCurrentQueue()):t.tasks}_genPromise(e){var t=this._queueStack.push({tasks:[],popable:!1})-1,s=this._queueStack[t];e.gen().then(()=>{s.popable=!0,this.hasTasksToProcess()&&this._onMoreTasks()}).catch(t=>{setTimeout(()=>{throw t.message=\"TaskQueue: Error resolving Promise in task \"+e.name+\": \"+t.message,t},0)})}}});","lineCount":1,"map":[[1,111,1,0],[1,115,1,0,"_objectSpread2"],[1,117,1,0,"_interopRequireDefault"],[1,119,1,0,"r"],[1,121,1,0,"d"],[1,123,1,0],[1,128,12,0,"_invariant"],[1,130,12,0,"_interopRequireDefault"],[1,132,12,0,"r"],[1,134,12,0,"d"],[1,136,12,0],[1,141,86,1,"_e"],[1,144,86,1,"default"],[1,152,13,0],[1,158,14,2,"constructor"],[1,170,14,14,"_ref"],[1,173,15,4],[1,177,15,8,"onMoreTasks"],[1,179,15,22,"_ref"],[1,181,15,27,"onMoreTasks"],[1,193,16,4,"this"],[1,198,16,9,"_onMoreTasks"],[1,211,16,24,"onMoreTasks"],[1,213,17,4,"this"],[1,218,17,9,"_queueStack"],[1,230,17,23],[1,231,17,24],[1,232,18,6,"tasks"],[1,238,18,13],[1,241,19,6,"popable"],[1,250,19,15],[1,253,21,2],[1,254,22,2,"enqueue"],[1,262,22,10,"task"],[1,265,23,4,"this"],[1,270,23,9,"_getCurrentQueue"],[1,289,23,28,"push"],[1,294,23,33,"task"],[1,296,24,2],[1,297,25,2,"enqueueTasks"],[1,310,25,15,"tasks"],[1,313,26,4,"tasks"],[1,315,26,10,"forEach"],[1,323,26,18,"task"],[1,326,26,26,"this"],[1,331,26,31,"enqueue"],[1,339,26,39,"task"],[1,342,27,2],[1,343,28,2,"cancelTasks"],[1,355,28,14,"tasksToCancel"],[1,358,29,4,"this"],[1,363,29,9,"_queueStack"],[1,375,29,23,"this"],[1,380,29,28,"_queueStack"],[1,392,29,40,"map"],[1,396,29,44,"queue"],[1,400,29,53],[1,402,29,53,"_objectSpread"],[1,414,29,67],[1,416,29,67,"_objectSpread"],[1,427,29,81],[1,428,29,82],[1,430,29,85,"queue"],[1,433,29,93],[1,434,29,94],[1,436,29,97],[1,437,30,6,"tasks"],[1,443,30,13,"queue"],[1,445,30,19,"tasks"],[1,451,30,25,"filter"],[1,458,30,32,"task"],[1,462,30,67],[1,466,30,40,"tasksToCancel"],[1,468,30,54,"indexOf"],[1,476,30,62,"task"],[1,483,31,8,"filter"],[1,490,31,15],[1,491,31,16,"queue"],[1,493,31,23,"idx"],[1,497,31,31,"queue"],[1,499,31,37,"tasks"],[1,505,31,43,"length"],[1,512,31,52],[1,515,31,65],[1,519,31,57,"idx"],[1,521,32,2],[1,522,33,2,"hasTasksToProcess"],[1,542,34,4],[1,549,34,11,"this"],[1,554,34,16,"_getCurrentQueue"],[1,573,34,35,"length"],[1,580,34,44],[1,581,35,2],[1,582,40,2,"processNext"],[1,596,41,4],[1,600,41,8,"queue"],[1,602,41,16,"this"],[1,607,41,21,"_getCurrentQueue"],[1,626,42,4],[1,629,42,8,"queue"],[1,631,42,14,"length"],[1,638,42,22],[1,639,43,6],[1,643,43,10,"task"],[1,645,43,17,"queue"],[1,647,43,23,"shift"],[1,655,44,6],[1,659,45,28],[1,676,45,19,"task"],[1,679,45,40,"task"],[1,681,45,45,"gen"],[1,685,46,10,"this"],[1,690,46,15,"_genPromise"],[1,702,46,27,"task"],[1,705,47,35],[1,722,47,26,"task"],[1,725,47,47,"task"],[1,727,47,52,"run"],[1,731,48,10,"task"],[1,733,48,15,"run"],[1,741,50,10],[1,743,50,10,"invariant"],[1,754,50,36],[1,773,50,27,"task"],[1,775,50,48],[1,835,50,110,"JSON"],[1,840,50,115,"stringify"],[1,850,50,125,"task"],[1,852,50,131],[1,857,50,137],[1,861,51,10,"task"],[1,865,53,6],[1,866,53,8],[1,872,53,15,"e"],[1,875,55,8],[1,881,54,8,"e"],[1,883,54,10,"message"],[1,891,54,20],[1,922,54,53,"task"],[1,924,54,58,"name"],[1,930,54,66],[1,934,54,72],[1,939,54,79,"e"],[1,941,54,81,"message"],[1,949,55,14,"e"],[1,950,56,6],[1,951,57,4],[1,952,58,2],[1,953,59,2,"_getCurrentQueue"],[1,972,60,4],[1,976,60,8,"stackIdx"],[1,978,60,19,"this"],[1,983,60,24,"_queueStack"],[1,995,60,36,"length"],[1,1002,60,45],[1,1004,61,8,"queue"],[1,1006,61,16,"this"],[1,1011,61,21,"_queueStack"],[1,1023,61,33,"stackIdx"],[1,1026,62,4],[1,1033,62,8,"queue"],[1,1035,62,14,"popable"],[1,1044,62,48],[1,1048,62,25,"queue"],[1,1050,62,31,"tasks"],[1,1056,62,37,"length"],[1,1064,62,53,"stackIdx"],[1,1066,62,64],[1,1069,63,6,"this"],[1,1074,63,11,"_queueStack"],[1,1086,63,23,"pop"],[1,1092,64,13,"this"],[1,1097,64,18,"_getCurrentQueue"],[1,1117,66,13,"queue"],[1,1119,66,19,"tasks"],[1,1124,68,2],[1,1125,69,2,"_genPromise"],[1,1137,69,14,"task"],[1,1140,70,4],[1,1144,74,8,"stackIdx"],[1,1146,70,17,"this"],[1,1151,70,22,"_queueStack"],[1,1163,70,34,"push"],[1,1168,70,39],[1,1169,71,6,"tasks"],[1,1175,71,13],[1,1178,72,6,"popable"],[1,1187,72,15],[1,1191,74,28],[1,1193,75,8,"stackItem"],[1,1195,75,20,"this"],[1,1200,75,25,"_queueStack"],[1,1212,75,37,"stackIdx"],[1,1215,76,4,"task"],[1,1217,76,9,"gen"],[1,1223,76,15,"then"],[1,1228,76,20],[1,1233,77,6,"stackItem"],[1,1235,77,16,"popable"],[1,1244,77,26],[1,1246,78,6,"this"],[1,1251,78,11,"hasTasksToProcess"],[1,1272,78,34,"this"],[1,1277,78,39,"_onMoreTasks"],[1,1294,79,7,"catch"],[1,1300,79,13,"ex"],[1,1304,80,6,"setTimeout"],[1,1315,80,17],[1,1320,82,8],[1,1326,81,8,"ex"],[1,1328,81,11,"message"],[1,1336,81,21],[1,1382,81,69,"task"],[1,1384,81,74,"name"],[1,1389,81,81],[1,1394,81,88,"ex"],[1,1396,81,91,"message"],[1,1404,82,14,"ex"],[1,1407,83,9],[1,1411,85,2],[1,1413,87,24],[1,1416]],"functionMap":{"names":["<global>","TaskQueue","constructor","enqueue","enqueueTasks","tasks.forEach$argument_0","cancelTasks","_queueStack.map$argument_0","queue.tasks.filter$argument_0","_queueStack.map.filter$argument_0","hasTasksToProcess","processNext","_getCurrentQueue","_genPromise","task.gen.then$argument_0","task.gen.then._catch$argument_0","setTimeout$argument_0"],"mappings":"AAA;ACY;ECC;GDO;EEC;GFE;EGC;kBCC,0BD;GHC;EKC;4CCC;gCCC,0CD;MDC,SG,mDH;GLC;ESC;GTE;EUK;GVkB;EWC;GXS;EYC;oBCO;KDG,QE;iBCC;ODG;KFC;GZC;CDC"}},"type":"js/module"}]}