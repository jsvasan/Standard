{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"]}},{"name":"fbjs/lib/invariant","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":11,"column":0,"index":235},"end":{"line":11,"column":43,"index":278}}],"key":"bGUa+dDG2WEhPiIlobT3urS95UE=","exportNames":["*"]}},{"name":"./TaskQueue","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":12,"column":0,"index":279},"end":{"line":12,"column":36,"index":315}}],"key":"y8fo5kGfLl9pDv/jLZi56kPjKgk=","exportNames":["*"]}},{"name":"../../vendor/react-native/vendor/emitter/EventEmitter","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":13,"column":0,"index":316},"end":{"line":13,"column":81,"index":397}}],"key":"+VjCxNdZ3Bzkaby9l14xk05Z7OQ=","exportNames":["*"]}},{"name":"../../modules/requestIdleCallback","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":14,"column":0,"index":398},"end":{"line":14,"column":68,"index":466}}],"key":"l6f3pukAuOqlX5ODkv5xfu+gwXY=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = void 0;\n  var _invariant = _interopRequireDefault(require(_dependencyMap[1], \"fbjs/lib/invariant\"));\n  var _TaskQueue = _interopRequireDefault(require(_dependencyMap[2], \"./TaskQueue\"));\n  var _EventEmitter = _interopRequireDefault(require(_dependencyMap[3], \"../../vendor/react-native/vendor/emitter/EventEmitter\"));\n  var _requestIdleCallback = _interopRequireDefault(require(_dependencyMap[4], \"../../modules/requestIdleCallback\"));\n  /**\n   * Copyright (c) Nicolas Gallagher.\n   * Copyright (c) Meta Platforms, Inc. and affiliates.\n   *\n   * This source code is licensed under the MIT license found in the\n   * LICENSE file in the root directory of this source tree.\n   *\n   * \n   */\n\n  var _emitter = new _EventEmitter.default();\n  var InteractionManager = {\n    Events: {\n      interactionStart: 'interactionStart',\n      interactionComplete: 'interactionComplete'\n    },\n    /**\n     * Schedule a function to run after all interactions have completed.\n     */\n    runAfterInteractions(task) {\n      var tasks = [];\n      var promise = new Promise(resolve => {\n        _scheduleUpdate();\n        if (task) {\n          tasks.push(task);\n        }\n        tasks.push({\n          run: resolve,\n          name: 'resolve ' + (task && task.name || '?')\n        });\n        _taskQueue.enqueueTasks(tasks);\n      });\n      return {\n        then: promise.then.bind(promise),\n        done: promise.then.bind(promise),\n        cancel: () => {\n          _taskQueue.cancelTasks(tasks);\n        }\n      };\n    },\n    /**\n     * Notify manager that an interaction has started.\n     */\n    createInteractionHandle() {\n      _scheduleUpdate();\n      var handle = ++_inc;\n      _addInteractionSet.add(handle);\n      return handle;\n    },\n    /**\n     * Notify manager that an interaction has completed.\n     */\n    clearInteractionHandle(handle) {\n      (0, _invariant.default)(!!handle, 'Must provide a handle to clear.');\n      _scheduleUpdate();\n      _addInteractionSet.delete(handle);\n      _deleteInteractionSet.add(handle);\n    },\n    addListener: _emitter.addListener.bind(_emitter),\n    /**\n     *\n     * @param deadline\n     */\n    setDeadline(deadline) {\n      _deadline = deadline;\n    }\n  };\n  var _interactionSet = new Set();\n  var _addInteractionSet = new Set();\n  var _deleteInteractionSet = new Set();\n  var _taskQueue = new _TaskQueue.default({\n    onMoreTasks: _scheduleUpdate\n  });\n  var _nextUpdateHandle = 0;\n  var _inc = 0;\n  var _deadline = -1;\n\n  /**\n   * Schedule an asynchronous update to the interaction state.\n   */\n  function _scheduleUpdate() {\n    if (!_nextUpdateHandle) {\n      if (_deadline > 0) {\n        _nextUpdateHandle = setTimeout(_processUpdate);\n      } else {\n        _nextUpdateHandle = (0, _requestIdleCallback.default)(_processUpdate);\n      }\n    }\n  }\n\n  /**\n   * Notify listeners, process queue, etc\n   */\n  function _processUpdate() {\n    _nextUpdateHandle = 0;\n    var interactionCount = _interactionSet.size;\n    _addInteractionSet.forEach(handle => _interactionSet.add(handle));\n    _deleteInteractionSet.forEach(handle => _interactionSet.delete(handle));\n    var nextInteractionCount = _interactionSet.size;\n    if (interactionCount !== 0 && nextInteractionCount === 0) {\n      _emitter.emit(InteractionManager.Events.interactionComplete);\n    } else if (interactionCount === 0 && nextInteractionCount !== 0) {\n      _emitter.emit(InteractionManager.Events.interactionStart);\n    }\n    if (nextInteractionCount === 0) {\n      // It seems that we can't know the running time of the current event loop,\n      // we can only calculate the running time of the current task queue.\n      var begin = Date.now();\n      while (_taskQueue.hasTasksToProcess()) {\n        _taskQueue.processNext();\n        if (_deadline > 0 && Date.now() - begin >= _deadline) {\n          _scheduleUpdate();\n          break;\n        }\n      }\n    }\n    _addInteractionSet.clear();\n    _deleteInteractionSet.clear();\n  }\n  var _default = exports.default = InteractionManager;\n});","lineCount":131,"map":[[7,2,11,0],[7,6,11,0,"_invariant"],[7,16,11,0],[7,19,11,0,"_interopRequireDefault"],[7,41,11,0],[7,42,11,0,"require"],[7,49,11,0],[7,50,11,0,"_dependencyMap"],[7,64,11,0],[8,2,12,0],[8,6,12,0,"_TaskQueue"],[8,16,12,0],[8,19,12,0,"_interopRequireDefault"],[8,41,12,0],[8,42,12,0,"require"],[8,49,12,0],[8,50,12,0,"_dependencyMap"],[8,64,12,0],[9,2,13,0],[9,6,13,0,"_EventEmitter"],[9,19,13,0],[9,22,13,0,"_interopRequireDefault"],[9,44,13,0],[9,45,13,0,"require"],[9,52,13,0],[9,53,13,0,"_dependencyMap"],[9,67,13,0],[10,2,14,0],[10,6,14,0,"_requestIdleCallback"],[10,26,14,0],[10,29,14,0,"_interopRequireDefault"],[10,51,14,0],[10,52,14,0,"require"],[10,59,14,0],[10,60,14,0,"_dependencyMap"],[10,74,14,0],[11,2,1,0],[12,0,2,0],[13,0,3,0],[14,0,4,0],[15,0,5,0],[16,0,6,0],[17,0,7,0],[18,0,8,0],[19,0,9,0],[21,2,15,0],[21,6,15,4,"_emitter"],[21,14,15,12],[21,17,15,15],[21,21,15,19,"EventEmitter"],[21,42,15,31],[21,43,15,32],[21,44,15,33],[22,2,16,0],[22,6,16,4,"InteractionManager"],[22,24,16,22],[22,27,16,25],[23,4,17,2,"Events"],[23,10,17,8],[23,12,17,10],[24,6,18,4,"interactionStart"],[24,22,18,20],[24,24,18,22],[24,42,18,40],[25,6,19,4,"interactionComplete"],[25,25,19,23],[25,27,19,25],[26,4,20,2],[26,5,20,3],[27,4,21,2],[28,0,22,0],[29,0,23,0],[30,4,24,2,"runAfterInteractions"],[30,24,24,22,"runAfterInteractions"],[30,25,24,23,"task"],[30,29,24,27],[30,31,24,29],[31,6,25,4],[31,10,25,8,"tasks"],[31,15,25,13],[31,18,25,16],[31,20,25,18],[32,6,26,4],[32,10,26,8,"promise"],[32,17,26,15],[32,20,26,18],[32,24,26,22,"Promise"],[32,31,26,29],[32,32,26,30,"resolve"],[32,39,26,37],[32,43,26,41],[33,8,27,6,"_scheduleUpdate"],[33,23,27,21],[33,24,27,22],[33,25,27,23],[34,8,28,6],[34,12,28,10,"task"],[34,16,28,14],[34,18,28,16],[35,10,29,8,"tasks"],[35,15,29,13],[35,16,29,14,"push"],[35,20,29,18],[35,21,29,19,"task"],[35,25,29,23],[35,26,29,24],[36,8,30,6],[37,8,31,6,"tasks"],[37,13,31,11],[37,14,31,12,"push"],[37,18,31,16],[37,19,31,17],[38,10,32,8,"run"],[38,13,32,11],[38,15,32,13,"resolve"],[38,22,32,20],[39,10,33,8,"name"],[39,14,33,12],[39,16,33,14],[39,26,33,24],[39,30,33,28,"task"],[39,34,33,32],[39,38,33,36,"task"],[39,42,33,40],[39,43,33,41,"name"],[39,47,33,45],[39,51,33,49],[39,54,33,52],[40,8,34,6],[40,9,34,7],[40,10,34,8],[41,8,35,6,"_taskQueue"],[41,18,35,16],[41,19,35,17,"enqueueTasks"],[41,31,35,29],[41,32,35,30,"tasks"],[41,37,35,35],[41,38,35,36],[42,6,36,4],[42,7,36,5],[42,8,36,6],[43,6,37,4],[43,13,37,11],[44,8,38,6,"then"],[44,12,38,10],[44,14,38,12,"promise"],[44,21,38,19],[44,22,38,20,"then"],[44,26,38,24],[44,27,38,25,"bind"],[44,31,38,29],[44,32,38,30,"promise"],[44,39,38,37],[44,40,38,38],[45,8,39,6,"done"],[45,12,39,10],[45,14,39,12,"promise"],[45,21,39,19],[45,22,39,20,"then"],[45,26,39,24],[45,27,39,25,"bind"],[45,31,39,29],[45,32,39,30,"promise"],[45,39,39,37],[45,40,39,38],[46,8,40,6,"cancel"],[46,14,40,12],[46,16,40,14,"cancel"],[46,17,40,14],[46,22,40,20],[47,10,41,8,"_taskQueue"],[47,20,41,18],[47,21,41,19,"cancelTasks"],[47,32,41,30],[47,33,41,31,"tasks"],[47,38,41,36],[47,39,41,37],[48,8,42,6],[49,6,43,4],[49,7,43,5],[50,4,44,2],[50,5,44,3],[51,4,45,2],[52,0,46,0],[53,0,47,0],[54,4,48,2,"createInteractionHandle"],[54,27,48,25,"createInteractionHandle"],[54,28,48,25],[54,30,48,28],[55,6,49,4,"_scheduleUpdate"],[55,21,49,19],[55,22,49,20],[55,23,49,21],[56,6,50,4],[56,10,50,8,"handle"],[56,16,50,14],[56,19,50,17],[56,21,50,19,"_inc"],[56,25,50,23],[57,6,51,4,"_addInteractionSet"],[57,24,51,22],[57,25,51,23,"add"],[57,28,51,26],[57,29,51,27,"handle"],[57,35,51,33],[57,36,51,34],[58,6,52,4],[58,13,52,11,"handle"],[58,19,52,17],[59,4,53,2],[59,5,53,3],[60,4,54,2],[61,0,55,0],[62,0,56,0],[63,4,57,2,"clearInteractionHandle"],[63,26,57,24,"clearInteractionHandle"],[63,27,57,25,"handle"],[63,33,57,31],[63,35,57,33],[64,6,58,4],[64,10,58,4,"invariant"],[64,28,58,13],[64,30,58,14],[64,31,58,15],[64,32,58,16,"handle"],[64,38,58,22],[64,40,58,24],[64,73,58,57],[64,74,58,58],[65,6,59,4,"_scheduleUpdate"],[65,21,59,19],[65,22,59,20],[65,23,59,21],[66,6,60,4,"_addInteractionSet"],[66,24,60,22],[66,25,60,23,"delete"],[66,31,60,29],[66,32,60,30,"handle"],[66,38,60,36],[66,39,60,37],[67,6,61,4,"_deleteInteractionSet"],[67,27,61,25],[67,28,61,26,"add"],[67,31,61,29],[67,32,61,30,"handle"],[67,38,61,36],[67,39,61,37],[68,4,62,2],[68,5,62,3],[69,4,63,2,"addListener"],[69,15,63,13],[69,17,63,15,"_emitter"],[69,25,63,23],[69,26,63,24,"addListener"],[69,37,63,35],[69,38,63,36,"bind"],[69,42,63,40],[69,43,63,41,"_emitter"],[69,51,63,49],[69,52,63,50],[70,4,64,2],[71,0,65,0],[72,0,66,0],[73,0,67,0],[74,4,68,2,"setDeadline"],[74,15,68,13,"setDeadline"],[74,16,68,14,"deadline"],[74,24,68,22],[74,26,68,24],[75,6,69,4,"_deadline"],[75,15,69,13],[75,18,69,16,"deadline"],[75,26,69,24],[76,4,70,2],[77,2,71,0],[77,3,71,1],[78,2,72,0],[78,6,72,4,"_interactionSet"],[78,21,72,19],[78,24,72,22],[78,28,72,26,"Set"],[78,31,72,29],[78,32,72,30],[78,33,72,31],[79,2,73,0],[79,6,73,4,"_addInteractionSet"],[79,24,73,22],[79,27,73,25],[79,31,73,29,"Set"],[79,34,73,32],[79,35,73,33],[79,36,73,34],[80,2,74,0],[80,6,74,4,"_deleteInteractionSet"],[80,27,74,25],[80,30,74,28],[80,34,74,32,"Set"],[80,37,74,35],[80,38,74,36],[80,39,74,37],[81,2,75,0],[81,6,75,4,"_taskQueue"],[81,16,75,14],[81,19,75,17],[81,23,75,21,"TaskQueue"],[81,41,75,30],[81,42,75,31],[82,4,76,2,"onMoreTasks"],[82,15,76,13],[82,17,76,15,"_scheduleUpdate"],[83,2,77,0],[83,3,77,1],[83,4,77,2],[84,2,78,0],[84,6,78,4,"_nextUpdateHandle"],[84,23,78,21],[84,26,78,24],[84,27,78,25],[85,2,79,0],[85,6,79,4,"_inc"],[85,10,79,8],[85,13,79,11],[85,14,79,12],[86,2,80,0],[86,6,80,4,"_deadline"],[86,15,80,13],[86,18,80,16],[86,19,80,17],[86,20,80,18],[88,2,82,0],[89,0,83,0],[90,0,84,0],[91,2,85,0],[91,11,85,9,"_scheduleUpdate"],[91,26,85,24,"_scheduleUpdate"],[91,27,85,24],[91,29,85,27],[92,4,86,2],[92,8,86,6],[92,9,86,7,"_nextUpdateHandle"],[92,26,86,24],[92,28,86,26],[93,6,87,4],[93,10,87,8,"_deadline"],[93,19,87,17],[93,22,87,20],[93,23,87,21],[93,25,87,23],[94,8,88,6,"_nextUpdateHandle"],[94,25,88,23],[94,28,88,26,"setTimeout"],[94,38,88,36],[94,39,88,37,"_processUpdate"],[94,53,88,51],[94,54,88,52],[95,6,89,4],[95,7,89,5],[95,13,89,11],[96,8,90,6,"_nextUpdateHandle"],[96,25,90,23],[96,28,90,26],[96,32,90,26,"requestIdleCallback"],[96,60,90,45],[96,62,90,46,"_processUpdate"],[96,76,90,60],[96,77,90,61],[97,6,91,4],[98,4,92,2],[99,2,93,0],[101,2,95,0],[102,0,96,0],[103,0,97,0],[104,2,98,0],[104,11,98,9,"_processUpdate"],[104,25,98,23,"_processUpdate"],[104,26,98,23],[104,28,98,26],[105,4,99,2,"_nextUpdateHandle"],[105,21,99,19],[105,24,99,22],[105,25,99,23],[106,4,100,2],[106,8,100,6,"interactionCount"],[106,24,100,22],[106,27,100,25,"_interactionSet"],[106,42,100,40],[106,43,100,41,"size"],[106,47,100,45],[107,4,101,2,"_addInteractionSet"],[107,22,101,20],[107,23,101,21,"forEach"],[107,30,101,28],[107,31,101,29,"handle"],[107,37,101,35],[107,41,101,39,"_interactionSet"],[107,56,101,54],[107,57,101,55,"add"],[107,60,101,58],[107,61,101,59,"handle"],[107,67,101,65],[107,68,101,66],[107,69,101,67],[108,4,102,2,"_deleteInteractionSet"],[108,25,102,23],[108,26,102,24,"forEach"],[108,33,102,31],[108,34,102,32,"handle"],[108,40,102,38],[108,44,102,42,"_interactionSet"],[108,59,102,57],[108,60,102,58,"delete"],[108,66,102,64],[108,67,102,65,"handle"],[108,73,102,71],[108,74,102,72],[108,75,102,73],[109,4,103,2],[109,8,103,6,"nextInteractionCount"],[109,28,103,26],[109,31,103,29,"_interactionSet"],[109,46,103,44],[109,47,103,45,"size"],[109,51,103,49],[110,4,104,2],[110,8,104,6,"interactionCount"],[110,24,104,22],[110,29,104,27],[110,30,104,28],[110,34,104,32,"nextInteractionCount"],[110,54,104,52],[110,59,104,57],[110,60,104,58],[110,62,104,60],[111,6,105,4,"_emitter"],[111,14,105,12],[111,15,105,13,"emit"],[111,19,105,17],[111,20,105,18,"InteractionManager"],[111,38,105,36],[111,39,105,37,"Events"],[111,45,105,43],[111,46,105,44,"interactionComplete"],[111,65,105,63],[111,66,105,64],[112,4,106,2],[112,5,106,3],[112,11,106,9],[112,15,106,13,"interactionCount"],[112,31,106,29],[112,36,106,34],[112,37,106,35],[112,41,106,39,"nextInteractionCount"],[112,61,106,59],[112,66,106,64],[112,67,106,65],[112,69,106,67],[113,6,107,4,"_emitter"],[113,14,107,12],[113,15,107,13,"emit"],[113,19,107,17],[113,20,107,18,"InteractionManager"],[113,38,107,36],[113,39,107,37,"Events"],[113,45,107,43],[113,46,107,44,"interactionStart"],[113,62,107,60],[113,63,107,61],[114,4,108,2],[115,4,109,2],[115,8,109,6,"nextInteractionCount"],[115,28,109,26],[115,33,109,31],[115,34,109,32],[115,36,109,34],[116,6,110,4],[117,6,111,4],[118,6,112,4],[118,10,112,8,"begin"],[118,15,112,13],[118,18,112,16,"Date"],[118,22,112,20],[118,23,112,21,"now"],[118,26,112,24],[118,27,112,25],[118,28,112,26],[119,6,113,4],[119,13,113,11,"_taskQueue"],[119,23,113,21],[119,24,113,22,"hasTasksToProcess"],[119,41,113,39],[119,42,113,40],[119,43,113,41],[119,45,113,43],[120,8,114,6,"_taskQueue"],[120,18,114,16],[120,19,114,17,"processNext"],[120,30,114,28],[120,31,114,29],[120,32,114,30],[121,8,115,6],[121,12,115,10,"_deadline"],[121,21,115,19],[121,24,115,22],[121,25,115,23],[121,29,115,27,"Date"],[121,33,115,31],[121,34,115,32,"now"],[121,37,115,35],[121,38,115,36],[121,39,115,37],[121,42,115,40,"begin"],[121,47,115,45],[121,51,115,49,"_deadline"],[121,60,115,58],[121,62,115,60],[122,10,116,8,"_scheduleUpdate"],[122,25,116,23],[122,26,116,24],[122,27,116,25],[123,10,117,8],[124,8,118,6],[125,6,119,4],[126,4,120,2],[127,4,121,2,"_addInteractionSet"],[127,22,121,20],[127,23,121,21,"clear"],[127,28,121,26],[127,29,121,27],[127,30,121,28],[128,4,122,2,"_deleteInteractionSet"],[128,25,122,23],[128,26,122,24,"clear"],[128,31,122,29],[128,32,122,30],[128,33,122,31],[129,2,123,0],[130,2,123,1],[130,6,123,1,"_default"],[130,14,123,1],[130,17,123,1,"exports"],[130,24,123,1],[130,25,123,1,"default"],[130,32,123,1],[130,35,124,15,"InteractionManager"],[130,53,124,33],[131,0,124,33],[131,3]],"functionMap":{"names":["<global>","InteractionManager.runAfterInteractions","Promise$argument_0","cancel","InteractionManager.createInteractionHandle","InteractionManager.clearInteractionHandle","InteractionManager.setDeadline","_scheduleUpdate","_processUpdate","_addInteractionSet.forEach$argument_0","_deleteInteractionSet.forEach$argument_0"],"mappings":"AAA;ECuB;8BCE;KDU;cEI;OFE;GDE;EII;GJK;EKI;GLK;EMM;GNE;AOe;CPQ;AQK;6BCG,qCD;gCEC,wCF;CRqB"}},"type":"js/module"}]}