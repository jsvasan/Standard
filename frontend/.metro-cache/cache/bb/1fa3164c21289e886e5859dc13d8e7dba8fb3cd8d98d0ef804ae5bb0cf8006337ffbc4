{"dependencies":[{"name":"@babel/runtime/helpers/objectWithoutPropertiesLoose","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"HFkXuFcBAqfzGtqyPj8g62MKT0M=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":52},"end":{"line":5,"column":65,"index":117}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  // Copyright Â© 2024 650 Industries.\n\n  'use client';\n  \"use strict\";\n\n  const _excluded = [\"get\", \"request\"];\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.createPermissionHook = createPermissionHook;\n  var _babelRuntimeHelpersObjectWithoutPropertiesLoose = require(_dependencyMap[0], \"@babel/runtime/helpers/objectWithoutPropertiesLoose\");\n  var _objectWithoutPropertiesLoose = _interopDefault(_babelRuntimeHelpersObjectWithoutPropertiesLoose);\n  var _react = require(_dependencyMap[1], \"react\");\n  // These types are identical, but improves the readability for suggestions in editors\n\n  /**\n   * Get or request permission for protected functionality within the app.\n   * It uses separate permission requesters to interact with a single permission.\n   * By default, the hook will only retrieve the permission status.\n   */\n  function usePermission(methods, options) {\n    const isMounted = (0, _react.useRef)(true);\n    const [status, setStatus] = (0, _react.useState)(null);\n    const _ref = options || {},\n      {\n        get = true,\n        request = false\n      } = _ref,\n      permissionOptions = (0, _objectWithoutPropertiesLoose.default)(_ref, _excluded);\n    const getPermission = (0, _react.useCallback)(async () => {\n      let response;\n      if (Object.keys(permissionOptions).length > 0) {\n        response = await methods.getMethod(permissionOptions);\n      } else {\n        response = await methods.getMethod();\n      }\n      if (isMounted.current) setStatus(response);\n      return response;\n    }, [methods.getMethod]);\n    const requestPermission = (0, _react.useCallback)(async () => {\n      let response;\n      if (Object.keys(permissionOptions).length > 0) {\n        response = await methods.requestMethod(permissionOptions);\n      } else {\n        response = await methods.requestMethod();\n      }\n      if (isMounted.current) setStatus(response);\n      return response;\n    }, [methods.requestMethod]);\n    (0, _react.useEffect)(function runMethods() {\n      if (request) requestPermission();\n      if (!request && get) getPermission();\n    }, [get, request, requestPermission, getPermission]);\n\n    // Workaround for unmounting components receiving state updates\n    (0, _react.useEffect)(function didMount() {\n      isMounted.current = true;\n      return () => {\n        isMounted.current = false;\n      };\n    }, []);\n    return [status, requestPermission, getPermission];\n  }\n\n  /**\n   * Create a new permission hook with the permission methods built-in.\n   * This can be used to quickly create specific permission hooks in every module.\n   */\n  function createPermissionHook(methods) {\n    return options => usePermission(methods, options);\n  }\n});","lineCount":78,"map":[[2,2,1,0],[4,2,3,0],[4,14,3,12],[5,2,3,13],[7,2,3,13],[7,8,3,13,"_excluded"],[7,17,3,13],[8,2,3,13,"Object"],[8,8,3,13],[8,9,3,13,"defineProperty"],[8,23,3,13],[8,24,3,13,"exports"],[8,31,3,13],[9,4,3,13,"value"],[9,9,3,13],[10,2,3,13],[11,2,3,13],[11,11,3,13,"_interopDefault"],[11,27,3,13,"e"],[11,28,3,13],[12,4,3,13],[12,11,3,13,"e"],[12,12,3,13],[12,16,3,13,"e"],[12,17,3,13],[12,18,3,13,"__esModule"],[12,28,3,13],[12,31,3,13,"e"],[12,32,3,13],[13,6,3,13,"default"],[13,13,3,13],[13,15,3,13,"e"],[14,4,3,13],[15,2,3,13],[16,2,87,0,"exports"],[16,9,87,0],[16,10,87,0,"createPermissionHook"],[16,30,87,0],[16,33,87,0,"createPermissionHook"],[16,53,87,0],[17,2,92,1],[17,6,92,1,"_babelRuntimeHelpersObjectWithoutPropertiesLoose"],[17,54,92,1],[17,57,92,1,"require"],[17,64,92,1],[17,65,92,1,"_dependencyMap"],[17,79,92,1],[18,2,92,1],[18,6,92,1,"_objectWithoutPropertiesLoose"],[18,35,92,1],[18,38,92,1,"_interopDefault"],[18,53,92,1],[18,54,92,1,"_babelRuntimeHelpersObjectWithoutPropertiesLoose"],[18,102,92,1],[19,2,5,0],[19,6,5,0,"_react"],[19,12,5,0],[19,15,5,0,"require"],[19,22,5,0],[19,23,5,0,"_dependencyMap"],[19,37,5,0],[20,2,9,0],[22,2,29,0],[23,0,30,0],[24,0,31,0],[25,0,32,0],[26,0,33,0],[27,2,34,0],[27,11,34,9,"usePermission"],[27,24,34,22,"usePermission"],[27,25,35,2,"methods"],[27,32,35,53],[27,34,36,2,"options"],[27,41,36,42],[27,43,37,93],[28,4,38,2],[28,10,38,8,"isMounted"],[28,19,38,17],[28,22,38,20],[28,26,38,20,"useRef"],[28,32,38,26],[28,33,38,26,"useRef"],[28,39,38,26],[28,41,38,27],[28,45,38,31],[28,46,38,32],[29,4,39,2],[29,10,39,8],[29,11,39,9,"status"],[29,17,39,15],[29,19,39,17,"setStatus"],[29,28,39,26],[29,29,39,27],[29,32,39,30],[29,36,39,30,"useState"],[29,42,39,38],[29,43,39,38,"useState"],[29,51,39,38],[29,53,39,58],[29,57,39,62],[29,58,39,63],[30,4,40,2],[30,10,40,2,"_ref"],[30,14,40,2],[30,17,40,64,"options"],[30,24,40,71],[30,28,40,75],[30,29,40,76],[30,30,40,77],[31,6,40,8],[32,8,40,10,"get"],[32,11,40,13],[32,14,40,16],[32,18,40,20],[33,8,40,22,"request"],[33,15,40,29],[33,18,40,32],[34,6,40,60],[34,7,40,61],[34,10,40,61,"_ref"],[34,14,40,61],[35,6,40,42,"permissionOptions"],[35,23,40,59],[35,30,40,59,"_objectWithoutPropertiesLoose"],[35,59,40,59],[35,60,40,59,"default"],[35,67,40,59],[35,69,40,59,"_ref"],[35,73,40,59],[35,75,40,59,"_excluded"],[35,84,40,59],[36,4,42,2],[36,10,42,8,"getPermission"],[36,23,42,21],[36,26,42,24],[36,30,42,24,"useCallback"],[36,36,42,35],[36,37,42,35,"useCallback"],[36,48,42,35],[36,50,42,36],[36,62,42,48],[37,6,43,4],[37,10,43,8,"response"],[37,18,43,28],[38,6,44,4],[38,10,44,8,"Object"],[38,16,44,14],[38,17,44,15,"keys"],[38,21,44,19],[38,22,44,20,"permissionOptions"],[38,39,44,37],[38,40,44,38],[38,41,44,39,"length"],[38,47,44,45],[38,50,44,48],[38,51,44,49],[38,53,44,51],[39,8,45,6,"response"],[39,16,45,14],[39,19,45,17],[39,25,45,23,"methods"],[39,32,45,30],[39,33,45,31,"getMethod"],[39,42,45,40],[39,43,45,41,"permissionOptions"],[39,60,45,69],[39,61,45,70],[40,6,46,4],[40,7,46,5],[40,13,46,11],[41,8,47,6,"response"],[41,16,47,14],[41,19,47,17],[41,25,47,23,"methods"],[41,32,47,30],[41,33,47,31,"getMethod"],[41,42,47,40],[41,43,47,41],[41,44,47,42],[42,6,48,4],[43,6,49,4],[43,10,49,8,"isMounted"],[43,19,49,17],[43,20,49,18,"current"],[43,27,49,25],[43,29,49,27,"setStatus"],[43,38,49,36],[43,39,49,37,"response"],[43,47,49,45],[43,48,49,46],[44,6,50,4],[44,13,50,11,"response"],[44,21,50,19],[45,4,51,2],[45,5,51,3],[45,7,51,5],[45,8,51,6,"methods"],[45,15,51,13],[45,16,51,14,"getMethod"],[45,25,51,23],[45,26,51,24],[45,27,51,25],[46,4,53,2],[46,10,53,8,"requestPermission"],[46,27,53,25],[46,30,53,28],[46,34,53,28,"useCallback"],[46,40,53,39],[46,41,53,39,"useCallback"],[46,52,53,39],[46,54,53,40],[46,66,53,52],[47,6,54,4],[47,10,54,8,"response"],[47,18,54,28],[48,6,55,4],[48,10,55,8,"Object"],[48,16,55,14],[48,17,55,15,"keys"],[48,21,55,19],[48,22,55,20,"permissionOptions"],[48,39,55,37],[48,40,55,38],[48,41,55,39,"length"],[48,47,55,45],[48,50,55,48],[48,51,55,49],[48,53,55,51],[49,8,56,6,"response"],[49,16,56,14],[49,19,56,17],[49,25,56,23,"methods"],[49,32,56,30],[49,33,56,31,"requestMethod"],[49,46,56,44],[49,47,56,45,"permissionOptions"],[49,64,56,73],[49,65,56,74],[50,6,57,4],[50,7,57,5],[50,13,57,11],[51,8,58,6,"response"],[51,16,58,14],[51,19,58,17],[51,25,58,23,"methods"],[51,32,58,30],[51,33,58,31,"requestMethod"],[51,46,58,44],[51,47,58,45],[51,48,58,46],[52,6,59,4],[53,6,60,4],[53,10,60,8,"isMounted"],[53,19,60,17],[53,20,60,18,"current"],[53,27,60,25],[53,29,60,27,"setStatus"],[53,38,60,36],[53,39,60,37,"response"],[53,47,60,45],[53,48,60,46],[54,6,61,4],[54,13,61,11,"response"],[54,21,61,19],[55,4,62,2],[55,5,62,3],[55,7,62,5],[55,8,62,6,"methods"],[55,15,62,13],[55,16,62,14,"requestMethod"],[55,29,62,27],[55,30,62,28],[55,31,62,29],[56,4,64,2],[56,8,64,2,"useEffect"],[56,14,64,11],[56,15,64,11,"useEffect"],[56,24,64,11],[56,26,65,4],[56,35,65,13,"runMethods"],[56,45,65,23,"runMethods"],[56,46,65,23],[56,48,65,26],[57,6,66,6],[57,10,66,10,"request"],[57,17,66,17],[57,19,66,19,"requestPermission"],[57,36,66,36],[57,37,66,37],[57,38,66,38],[58,6,67,6],[58,10,67,10],[58,11,67,11,"request"],[58,18,67,18],[58,22,67,22,"get"],[58,25,67,25],[58,27,67,27,"getPermission"],[58,40,67,40],[58,41,67,41],[58,42,67,42],[59,4,68,4],[59,5,68,5],[59,7,69,4],[59,8,69,5,"get"],[59,11,69,8],[59,13,69,10,"request"],[59,20,69,17],[59,22,69,19,"requestPermission"],[59,39,69,36],[59,41,69,38,"getPermission"],[59,54,69,51],[59,55,70,2],[59,56,70,3],[61,4,72,2],[62,4,73,2],[62,8,73,2,"useEffect"],[62,14,73,11],[62,15,73,11,"useEffect"],[62,24,73,11],[62,26,73,12],[62,35,73,21,"didMount"],[62,43,73,29,"didMount"],[62,44,73,29],[62,46,73,32],[63,6,74,4,"isMounted"],[63,15,74,13],[63,16,74,14,"current"],[63,23,74,21],[63,26,74,24],[63,30,74,28],[64,6,75,4],[64,13,75,11],[64,19,75,17],[65,8,76,6,"isMounted"],[65,17,76,15],[65,18,76,16,"current"],[65,25,76,23],[65,28,76,26],[65,33,76,31],[66,6,77,4],[66,7,77,5],[67,4,78,2],[67,5,78,3],[67,7,78,5],[67,9,78,7],[67,10,78,8],[68,4,80,2],[68,11,80,9],[68,12,80,10,"status"],[68,18,80,16],[68,20,80,18,"requestPermission"],[68,37,80,35],[68,39,80,37,"getPermission"],[68,52,80,50],[68,53,80,51],[69,2,81,0],[71,2,83,0],[72,0,84,0],[73,0,85,0],[74,0,86,0],[75,2,87,7],[75,11,87,16,"createPermissionHook"],[75,31,87,36,"createPermissionHook"],[75,32,88,2,"methods"],[75,39,88,53],[75,41,89,2],[76,4,90,2],[76,11,90,10,"options"],[76,18,90,50],[76,22,91,4,"usePermission"],[76,35,91,17],[76,36,91,39,"methods"],[76,43,91,46],[76,45,91,48,"options"],[76,52,91,55],[76,53,91,56],[77,2,92,0],[78,0,92,1],[78,3]],"functionMap":{"names":["<global>","usePermission","getPermission","requestPermission","runMethods","didMount","<anonymous>","createPermissionHook"],"mappings":"AAA;ACiC;oCCQ;GDS;wCEE;GFS;IGG;KHG;YIK;WCE;KDE;GJC;CDG;OOM;SDG;wDCC;CPC"},"hasCjsExports":false},"type":"js/module"}]}