{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":52},"end":{"line":5,"column":65,"index":117}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  // Copyright Â© 2024 650 Industries.\n\n  'use client';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.createPermissionHook = createPermissionHook;\n  var _react = require(_dependencyMap[0], \"react\");\n  // These types are identical, but improves the readability for suggestions in editors\n\n  /**\n   * Get or request permission for protected functionality within the app.\n   * It uses separate permission requesters to interact with a single permission.\n   * By default, the hook will only retrieve the permission status.\n   */\n  function usePermission(methods, options) {\n    const isMounted = (0, _react.useRef)(true);\n    const [status, setStatus] = (0, _react.useState)(null);\n    const {\n      get = true,\n      request = false,\n      ...permissionOptions\n    } = options || {};\n    const getPermission = (0, _react.useCallback)(async () => {\n      const response = await methods.getMethod(Object.keys(permissionOptions).length > 0 ? permissionOptions : undefined);\n      if (isMounted.current) setStatus(response);\n      return response;\n    }, [methods.getMethod]);\n    const requestPermission = (0, _react.useCallback)(async () => {\n      const response = await methods.requestMethod(Object.keys(permissionOptions).length > 0 ? permissionOptions : undefined);\n      if (isMounted.current) setStatus(response);\n      return response;\n    }, [methods.requestMethod]);\n    (0, _react.useEffect)(function runMethods() {\n      if (request) requestPermission();\n      if (!request && get) getPermission();\n    }, [get, request, requestPermission, getPermission]);\n\n    // Workaround for unmounting components receiving state updates\n    (0, _react.useEffect)(function didMount() {\n      isMounted.current = true;\n      return () => {\n        isMounted.current = false;\n      };\n    }, []);\n    return [status, requestPermission, getPermission];\n  }\n\n  /**\n   * Create a new permission hook with the permission methods built-in.\n   * This can be used to quickly create specific permission hooks in every module.\n   */\n  function createPermissionHook(methods) {\n    return options => usePermission(methods, options);\n  }\n});","lineCount":58,"map":[[2,2,1,0],[4,2,3,0],[4,14,3,12],[6,2,3,13,"Object"],[6,8,3,13],[6,9,3,13,"defineProperty"],[6,23,3,13],[6,24,3,13,"exports"],[6,31,3,13],[7,4,3,13,"value"],[7,9,3,13],[8,2,3,13],[9,2,3,13,"exports"],[9,9,3,13],[9,10,3,13,"createPermissionHook"],[9,30,3,13],[9,33,3,13,"createPermissionHook"],[9,53,3,13],[10,2,5,0],[10,6,5,0,"_react"],[10,12,5,0],[10,15,5,0,"require"],[10,22,5,0],[10,23,5,0,"_dependencyMap"],[10,37,5,0],[11,2,9,0],[13,2,29,0],[14,0,30,0],[15,0,31,0],[16,0,32,0],[17,0,33,0],[18,2,34,0],[18,11,34,9,"usePermission"],[18,24,34,22,"usePermission"],[18,25,35,2,"methods"],[18,32,35,53],[18,34,36,2,"options"],[18,41,36,42],[18,43,37,93],[19,4,38,2],[19,10,38,8,"isMounted"],[19,19,38,17],[19,22,38,20],[19,26,38,20,"useRef"],[19,39,38,26],[19,41,38,27],[19,45,38,31],[19,46,38,32],[20,4,39,2],[20,10,39,8],[20,11,39,9,"status"],[20,17,39,15],[20,19,39,17,"setStatus"],[20,28,39,26],[20,29,39,27],[20,32,39,30],[20,36,39,30,"useState"],[20,51,39,38],[20,53,39,58],[20,57,39,62],[20,58,39,63],[21,4,40,2],[21,10,40,8],[22,6,40,10,"get"],[22,9,40,13],[22,12,40,16],[22,16,40,20],[23,6,40,22,"request"],[23,13,40,29],[23,16,40,32],[23,21,40,37],[24,6,40,39],[24,9,40,42,"permissionOptions"],[25,4,40,60],[25,5,40,61],[25,8,40,64,"options"],[25,15,40,71],[25,19,40,75],[25,20,40,76],[25,21,40,77],[26,4,42,2],[26,10,42,8,"getPermission"],[26,23,42,21],[26,26,42,24],[26,30,42,24,"useCallback"],[26,48,42,35],[26,50,42,36],[26,62,42,48],[27,6,43,4],[27,12,43,10,"response"],[27,20,43,18],[27,23,43,21],[27,29,43,27,"methods"],[27,36,43,34],[27,37,43,35,"getMethod"],[27,46,43,44],[27,47,44,6,"Object"],[27,53,44,12],[27,54,44,13,"keys"],[27,58,44,17],[27,59,44,18,"permissionOptions"],[27,76,44,35],[27,77,44,36],[27,78,44,37,"length"],[27,84,44,43],[27,87,44,46],[27,88,44,47],[27,91,44,51,"permissionOptions"],[27,108,44,68],[27,111,44,83,"undefined"],[27,120,45,4],[27,121,45,5],[28,6,46,4],[28,10,46,8,"isMounted"],[28,19,46,17],[28,20,46,18,"current"],[28,27,46,25],[28,29,46,27,"setStatus"],[28,38,46,36],[28,39,46,37,"response"],[28,47,46,45],[28,48,46,46],[29,6,47,4],[29,13,47,11,"response"],[29,21,47,19],[30,4,48,2],[30,5,48,3],[30,7,48,5],[30,8,48,6,"methods"],[30,15,48,13],[30,16,48,14,"getMethod"],[30,25,48,23],[30,26,48,24],[30,27,48,25],[31,4,50,2],[31,10,50,8,"requestPermission"],[31,27,50,25],[31,30,50,28],[31,34,50,28,"useCallback"],[31,52,50,39],[31,54,50,40],[31,66,50,52],[32,6,51,4],[32,12,51,10,"response"],[32,20,51,18],[32,23,51,21],[32,29,51,27,"methods"],[32,36,51,34],[32,37,51,35,"requestMethod"],[32,50,51,48],[32,51,52,6,"Object"],[32,57,52,12],[32,58,52,13,"keys"],[32,62,52,17],[32,63,52,18,"permissionOptions"],[32,80,52,35],[32,81,52,36],[32,82,52,37,"length"],[32,88,52,43],[32,91,52,46],[32,92,52,47],[32,95,52,51,"permissionOptions"],[32,112,52,68],[32,115,52,83,"undefined"],[32,124,53,4],[32,125,53,5],[33,6,54,4],[33,10,54,8,"isMounted"],[33,19,54,17],[33,20,54,18,"current"],[33,27,54,25],[33,29,54,27,"setStatus"],[33,38,54,36],[33,39,54,37,"response"],[33,47,54,45],[33,48,54,46],[34,6,55,4],[34,13,55,11,"response"],[34,21,55,19],[35,4,56,2],[35,5,56,3],[35,7,56,5],[35,8,56,6,"methods"],[35,15,56,13],[35,16,56,14,"requestMethod"],[35,29,56,27],[35,30,56,28],[35,31,56,29],[36,4,58,2],[36,8,58,2,"useEffect"],[36,24,58,11],[36,26,59,4],[36,35,59,13,"runMethods"],[36,45,59,23,"runMethods"],[36,46,59,23],[36,48,59,26],[37,6,60,6],[37,10,60,10,"request"],[37,17,60,17],[37,19,60,19,"requestPermission"],[37,36,60,36],[37,37,60,37],[37,38,60,38],[38,6,61,6],[38,10,61,10],[38,11,61,11,"request"],[38,18,61,18],[38,22,61,22,"get"],[38,25,61,25],[38,27,61,27,"getPermission"],[38,40,61,40],[38,41,61,41],[38,42,61,42],[39,4,62,4],[39,5,62,5],[39,7,63,4],[39,8,63,5,"get"],[39,11,63,8],[39,13,63,10,"request"],[39,20,63,17],[39,22,63,19,"requestPermission"],[39,39,63,36],[39,41,63,38,"getPermission"],[39,54,63,51],[39,55,64,2],[39,56,64,3],[41,4,66,2],[42,4,67,2],[42,8,67,2,"useEffect"],[42,24,67,11],[42,26,67,12],[42,35,67,21,"didMount"],[42,43,67,29,"didMount"],[42,44,67,29],[42,46,67,32],[43,6,68,4,"isMounted"],[43,15,68,13],[43,16,68,14,"current"],[43,23,68,21],[43,26,68,24],[43,30,68,28],[44,6,69,4],[44,13,69,11],[44,19,69,17],[45,8,70,6,"isMounted"],[45,17,70,15],[45,18,70,16,"current"],[45,25,70,23],[45,28,70,26],[45,33,70,31],[46,6,71,4],[46,7,71,5],[47,4,72,2],[47,5,72,3],[47,7,72,5],[47,9,72,7],[47,10,72,8],[48,4,74,2],[48,11,74,9],[48,12,74,10,"status"],[48,18,74,16],[48,20,74,18,"requestPermission"],[48,37,74,35],[48,39,74,37,"getPermission"],[48,52,74,50],[48,53,74,51],[49,2,75,0],[51,2,77,0],[52,0,78,0],[53,0,79,0],[54,0,80,0],[55,2,81,7],[55,11,81,16,"createPermissionHook"],[55,31,81,36,"createPermissionHook"],[55,32,82,2,"methods"],[55,39,82,53],[55,41,83,2],[56,4,84,2],[56,11,84,10,"options"],[56,18,84,50],[56,22,85,4,"usePermission"],[56,35,85,17],[56,36,85,39,"methods"],[56,43,85,46],[56,45,85,48,"options"],[56,52,85,55],[56,53,85,56],[57,2,86,0],[58,0,86,1],[58,3]],"functionMap":{"names":["<global>","usePermission","getPermission","requestPermission","runMethods","didMount","<anonymous>","createPermissionHook"],"mappings":"AAA;ACiC;oCCQ;GDM;wCEE;GFM;IGG;KHG;YIK;WCE;KDE;GJC;CDG;OOM;SDG;wDCC;CPC"}},"type":"js/module"}]}